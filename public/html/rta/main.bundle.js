(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{RZ:()=>i,ei:()=>r,wb:()=>s});const i={FETCH_CONTENT:"Failed to get Content",FETCH_TITLE:"Untitled"},s={WEB:"content-signed-url",OFFLINE:"filename"},r="userId"},660:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(426);const s=t=>{const e=(new DOMParser).parseFromString(t,"application/xml");return{title:e.querySelector("title")?.textContent||i.RZ.FETCH_TITLE,content:e.querySelector("content")?.innerHTML||i.RZ.FETCH_CONTENT}},r={getContent:t=>(t=>new Promise(((e,n)=>{if(!window.rtaContentProvider)throw new Error("there is no rtaContentPrivider in window object!");const i=window.rtaContentProvider.getContent(t);i?e(i):n(new Error(`failed to get Content from ${t}`))})))(t).then(s).catch((t=>(console.error(t),{title:i.RZ.FETCH_TITLE,content:i.RZ.FETCH_CONTENT})))}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const t=(t,e,n,i)=>{let s=n?n.call(i,t,e):void 0;if(void 0!==s)return!!s;if(Object.is(t,e))return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;const r=Object.keys(t),a=Object.keys(e);if(r.length!==a.length)return!1;const o=Object.prototype.hasOwnProperty.bind(e);for(let a=0;a<r.length;a++){const l=r[a];if(!o(l))return!1;const c=t[l],d=e[l];if(s=n?n.call(i,c,d,l):void 0,!1===s||void 0===s&&!Object.is(c,d))return!1}return!0},e=class{constructor(e){let{$target:n,initialState:i,className:s,id:r,display:a=!0}=e;this.$target=n,this.$children=new Map,this.$state={...i},this.$stateSubscribers={},this.$props=new Proxy({className:s,display:a,id:r},{set:(e,n,i)=>{const s={...e};return e[n]=i,t(s,e)||this.render(),!0}})}template(){return""}beforeRender(){}afterRender(){}render(){this.beforeRender();const t=this.template(),{display:e,className:n,id:i}=this.$props;i&&this.$node&&(this.$node.id=i),n&&this.$node&&(this.$node.className=n),!e&&this.$node&&this.$node.setAttribute("style","display: none;"),t&&this.$node&&(this.$children?.forEach((t=>t.unMount())),this.clearEvent(),this.$node.innerHTML=t,this.setEvent(),this.$children?.forEach((t=>t.mount()))),this.afterRender()}setState(e){const n=this.$state;this.$state={...this.$state,...e},t(n,this.$state)||(this.render(),Object.keys(this.$stateSubscribers).length&&this.setSubscribersState(this.$state,n))}subscribeState(t){let{targetState:e,subscriber:n,subscriberStateKey:i,compute:s}=t;this.$children.get(n)&&(this.$stateSubscribers[n]=[...this.$stateSubscribers[n]||[],{subscriberStateKey:i,targetState:e,compute:s}])}setSubscribersState(t,e){for(const[n,i]of Object.entries(this.$stateSubscribers)){const s=i.reduce(((n,i)=>{let{targetState:s,subscriberStateKey:r,compute:a}=i;return n[r]=a?.(t[s],e[s])||t[s],n}),{});this.$children.get(n)?.setState(s)}}beforeMount(){}mount(){return this.$children?.forEach((t=>t.mount())),this.render(),this.setEvent(),this.beforeMount(),this.$node&&this.$target.appendChild(this.$node),this.afterMount(),this}afterMount(){}beforeUnMount(){}unMount(){return this.beforeUnMount(),this.clearEvent(),this.$node&&this.$target.removeChild(this.$node),this}setEvent(){}clearEvent(){}},i=class extends e{constructor(t){let{$target:e}=t;super({$target:e,id:"close-button"}),this.$node=document.createElement("div"),this.$node.setAttribute("title","Close Reflowable Viewer"),this.handleClose=t=>{t.target instanceof Node&&(t.preventDefault(),window.close())}}template(){return'<svg tabIndex=0 aria-label="Close Reflowable Viewer" role="button" width="32" height="32" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M16 2.5C8.544 2.5 2.5 8.544 2.5 16S8.544 29.5 16 29.5 29.5 23.456 29.5 16 23.456 2.5 16 2.5z" fill="#3C3C52"/><path d="M16 2c7.732 0 14 6.268 14 14s-6.268 14-14 14S2 23.732 2 16 8.268 2 16 2zm0 1.273C8.97 3.273 3.273 8.97 3.273 16c0 7.03 5.698 12.727 12.727 12.727 7.03 0 12.727-5.698 12.727-12.727C28.727 8.97 23.03 3.273 16 3.273zm-5.678 7.049c.43-.43 1.123-.43 1.552 0L16 14.448l4.126-4.125a1.096 1.096 0 1 1 1.552 1.552L17.552 16l4.126 4.125a1.096 1.096 0 1 1-1.552 1.552L16 17.553l-4.126 4.125a1.095 1.095 0 0 1-1.552 0 1.096 1.096 0 0 1 0-1.552L14.448 16l-4.126-4.126a1.096 1.096 0 0 1 0-1.552z" fill="#FFF"/></g></svg>'}setEvent(){this.$node?.addEventListener("click",this.handleClose),this.$node?.addEventListener("keydown",s)}clearEvent(){this.$node?.removeEventListener("click",this.handleClose),this.$node?.removeEventListener("keydown",s)}};function s(t){"Enter"===t.key&&(t.stopPropagation(),console.log("enter"),t.currentTarget?.click())}const r={text:"Test",fontSize:4,isMobile:!1,letterSpacing:1},a=class extends e{constructor(t){let{$target:e,initialState:n}=t;super({$target:e,initialState:{...r,...n},id:"reading-text"}),this.$node=document.createElement("div")}template(){const{text:t}=this.$state;return`\n      ${t}\n      <div id="additional-scroll-area" class="additional-scroll-area"/>\n    `}afterRender(){const{fontSize:t,isMobile:e,letterSpacing:n}=this.$state;this.$node?.classList.remove("size-1","size-2","size-3","size-4","size-5","size-6","size-7"),this.$node?.classList.remove("letter-spacing-1","letter-spacing-2","letter-spacing-3","letter-spacing-4","letter-spacing-5","letter-spacing-6","letter-spacing-7"),this.$node?.classList.remove("mobile"),this.$node?.classList.add(`letter-spacing-${n}`),this.$node?.classList.add(`size-${t}`),e&&this.$node?.classList.add("mobile")}},o=t=>e=>t.querySelector(e),l=()=>window.innerWidth<=700;function c(t,e,n,i){if(!i)return;const s=o(i)(`input#${t}`);if(!(s&&s instanceof HTMLInputElement))return;const r=(e-1)/(n-1)*100;var a;s.max=n.toString(10),s.value=e.toString(10),s.style.background=`\n  linear-gradient(to right, \n      rgba(0, 0, 0, 0) 0%, \n      rgba(0, 0, 0, 0) 4.333%,\n      #3cf 4.333%,\n      #3cf ${r}%,\n      #fff ${r}%,\n      #fff 95%, \n      rgba(0, 0, 0, 0) 95%,\n      rgba(0, 0, 0, 0) 100%\n  )\n  `,(a=i,t=>a.querySelectorAll(t))(`.${t}-container span`).forEach(((t,n)=>{const i=n+1;let s;s=i<e?"#00ccff":i===e?"#fff":"#f2f2f2",t.style.background=s}))}function d(t,e){document.body.style.backgroundColor="#f1f1f1",document.body.style.color="#222",t?.setAttribute("style","background-color: #3C3C52"),g("default"),e&&(e.classList.remove("sepia"),e.classList.remove("dark"))}function h(t,e){document.body.style.backgroundColor="#F7E9D4",document.body.style.color="#603D11",t?.setAttribute("style","background-color: #603D11"),g("sepia"),e&&(e.classList.remove("dark"),e.classList.add("sepia"))}function u(t,e){document.body.style.backgroundColor="#16191C",document.body.style.color="#fff",t?.setAttribute("style","background-color: #333333"),g("dark"),e&&(e.classList.remove("sepia"),e.classList.add("dark"))}function g(t){document.getElementById(`color-palette ${t}`)?.setAttribute("aria-checked","true"),["default","sepia","dark"].filter((e=>e!==t)).forEach((t=>{document.getElementById(`color-palette ${t}`)?.setAttribute("aria-checked","false")}))}const b=(t,e)=>{if(!t)return;const n=`${t}-setting`,i={...S(t),theme:e};localStorage.setItem(n,JSON.stringify(i))},S=t=>{const e=`${t}-setting`,n=localStorage.getItem(e);return n?JSON.parse(n):{}},f={fontSize:4,maxLevel:7,letterSpacing:2,userId:null},p=class extends e{isInit=!0;isLocalStorageLoaded=!1;constructor(t){let{$target:e,initialState:n,onFontSizeChange:i,onLetterSpacingChange:s}=t;super({$target:e,initialState:{...f,...n},id:"tools"}),this.$node=document.createElement("div"),this.onFontSizeChange=i,this.onLetterSpacingChange=s,this.handleFontSizeChange=t=>{if(!(t.target instanceof HTMLInputElement))return;const{fontSize:e,userId:n}=this.$state,s=+t.target.value;t.target.setAttribute("aria-valuetext",`Font Size ${s} Selected`),e!==s&&(i?.(s),((t,e)=>{if(!t)return;const n=`${t}-setting`,i={...S(t),fontSize:e};localStorage.setItem(n,JSON.stringify(i))})(n,s))},this.handleFontSizeTouchStart=()=>{document.body.style.overflow="hidden"},this.handleFontSizeTouchEnd=()=>{document.body.style.overflow=""},this.handleLetterSpacingChange=t=>{if(!(t.target instanceof HTMLInputElement))return;const{letterSpacing:e,userId:n}=this.$state,i=+t.target.value;t.target.setAttribute("aria-valuetext",`Letter Space ${i} Selected`),e!==i&&(s?.(i),((t,e)=>{if(!t)return;const n=`${t}-setting`,i={...S(t),letterSpacing:e};localStorage.setItem(n,JSON.stringify(i))})(n,i))}}setEvent(){if(!this.$node)return;const t=o(this.$node)("#font-size");t?.addEventListener("input",this.handleFontSizeChange),t?.addEventListener("touchstart",this.handleFontSizeTouchStart),t?.addEventListener("touchend",this.handleFontSizeTouchEnd);const e=o(this.$node)("#letter-space");e?.addEventListener("input",this.handleLetterSpacingChange),e?.addEventListener("touchstart",this.handleFontSizeTouchStart),e?.addEventListener("touchend",this.handleFontSizeTouchEnd);const n=o(this.$node)("#tool-toggle-button"),i=o(this.$node)(".tools-container");n?.addEventListener("click",(t=>{const e=document.getElementById("additional-scroll-area");t.stopImmediatePropagation(),i?.classList.contains("hide")?(i.classList.remove("hide"),n.classList.remove("rotate"),n.setAttribute("aria-expanded","true"),e&&(e.style.height=`${i?.clientHeight}px`)):(i?.classList.add("hide"),n?.classList.add("rotate"),n.setAttribute("aria-expanded","false"),e&&(e.style.height="0px"))}));const s=o(this.$node)("#theme-selector"),r=o(this.$node)(".tools"),a=document.getElementById("reading-text");s?.addEventListener("click",(t=>{t.preventDefault();const e=t.target;s?.childNodes.forEach((t=>{t instanceof HTMLButtonElement&&t.classList.remove("selected")})),e.classList.contains("default")?(d(r,a),e.classList.add("selected"),b(this.$state.userId,"default")):e.classList.contains("sepia")?(h(r,a),e.classList.add("selected"),b(this.$state.userId,"sepia")):e.classList.contains("dark")&&(u(r,a),e.classList.add("selected"),b(this.$state.userId,"dark"))}))}afterRender(){if(!this.$node)return;const{fontSize:t,maxLevel:e,letterSpacing:n,userId:i}=this.$state,s=o(this.$node)(".dotContainer");s&&(s.innerHTML=v(e)),c("font-size",t,e,this.$node),c("letter-space",n,e,this.$node),null!==i&&!this.isLocalStorageLoaded&&this.loadLocalstorageSettings(i)}template(){if(!this.isInit)return"";const{fontSize:t,maxLevel:e,letterSpacing:n}=this.$state;return`\n      <div class="tools">\n        \n    <button id="tool-toggle-button" aria-expanded=true class="tool-toggle-button" aria-label="Toggle Button for Toolbar" title="Toggle Button for Toolbar">\n      <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.60156 10.3356C6.60156 10.5756 6.66156 10.8156 6.84156 10.9956L11.5816 15.7356C11.7616 15.8556 11.9416 15.9756 12.1816 15.9756C12.4216 15.9756 12.6616 15.8556 12.8416 15.7356L17.5816 10.9956C17.9416 10.6356 17.9416 10.0956 17.5816 9.73559C17.2216 9.37559 16.6816 9.37559 16.3216 9.73559L12.1816 13.8156L8.10156 9.73559C7.74156 9.37559 7.20156 9.37559 6.84156 9.73559C6.66156 9.91559 6.60156 10.1556 6.60156 10.3356Z" fill="white"/></svg>\n    </button>\n  \n        <div class="tools-container">\n          \n    <div class="tool-container">\n      <label class="tool-label" for="theme-selector">Background Color</label>\n      <div class="color-palette-container" id="theme-selector">\n        <button role="radio" id="color-palette default" aria-checked="false" class="color-palette default" aria-label="Default Theme" title="Default Theme">Aa</button>\n        <button role="radio" id="color-palette sepia" aria-checked="false" class="color-palette sepia" aria-label="Sepia Theme" title="Sepia Theme">Aa</button>\n        <button role="radio" id="color-palette dark" aria-checked="false" class="color-palette dark" aria-label="Dark Theme" title="Dark Theme">Aa</button>\n      </div>\n    </div>\n  \n          ${function(t,e){return`\n    <div class="tool-container" aria-label="Font Size Controller" title="Font Size Controller">\n      <div class="tool-label">Font Size</div>\n      <div id="font-controller" class="font-size">\n          <div class="font-size-container slidecontainer">\n              <div class="dotContainer">\n                ${v(e)}\n              </div>\n              <input role="slider" tabindex="0" aria-valuetext="Font Size ${t} Selected" aria-labelledby="font-size-label" type="range" min="1" max="${e}" id="font-size" step="1">\n          </div>\n      </div>\n    </div>\n  `}(t,e)}\n          ${function(t,e){return`\n    <div class="tool-container" aria-label="Letter Space Controller" title="Letter Space Controller">\n      <div class="tool-label">Letter Spacing</div>\n      <div id="font-controller" class="letter-space">\n          <div class="letter-space-container slidecontainer">\n              <div class="dotContainer">\n                ${v(e)}\n              </div>\n              <input role="slider" tabindex="0" aria-valuetext="Letter Space ${t} Selected" aria-labelledby="letter-space-label" type="range" min="1" max="${e}" id="letter-space" step="1">\n          </div>\n      </div>\n    </div>\n  `}(n,e)}\n        </div>\n      </div>\n    `}clearEvent(){if(!this.$node)return;const t=o(this.$node)("#font-size");t?.removeEventListener("input",this.handleFontSizeChange),t?.removeEventListener("touchstart",this.handleFontSizeTouchStart),t?.removeEventListener("touchend",this.handleFontSizeTouchEnd);const e=o(this.$node)("#letter-space");e?.removeEventListener("input",this.handleLetterSpacingChange),e?.removeEventListener("touchstart",this.handleFontSizeTouchStart),e?.removeEventListener("touchend",this.handleFontSizeTouchEnd)}afterMount(){this.isInit=!1}loadLocalstorageSettings(t){const{fontSize:e,letterSpacing:n,theme:i}=S(t),s=document.getElementById("reading-text");e&&this.onFontSizeChange?.(e),n&&this.onLetterSpacingChange?.(n),i&&this.$node&&function(t,e,n){"default"===t?d(e,n):"sepia"===t?h(e,n):"dark"===t&&u(e,n)}(i,o(this.$node)(".tools"),s),this.isLocalStorageLoaded=!0}};function v(t){return`${new Array(t).fill("<span></span>").join("")}`}var $=n(426);const m=n(660).Z,L=document.querySelector("#app");L&&new class extends e{constructor(t){let{$target:e}=t;super({$target:e,initialState:{text:"Loading...",fontSize:4,title:"RTA Viewer",isMobile:l(),letterSpacing:2,userId:null}});const{text:n,fontSize:s,isMobile:r,letterSpacing:o,userId:c}=this.$state;this.$children.set("readingText",new a({$target:this.$target,initialState:{text:n,fontSize:s,letterSpacing:o}})),this.$children.set("closeButton",new i({$target:this.$target})),this.$children.set("toolbar",new p({$target:this.$target,initialState:{fontSize:s,letterSpacing:o,userId:c,maxLevel:r?5:7},onFontSizeChange:t=>this.setState({fontSize:t}),onLetterSpacingChange:t=>this.setState({letterSpacing:t})})),this.subscribeState({targetState:"fontSize",subscriber:"readingText",subscriberStateKey:"fontSize"}),this.subscribeState({targetState:"letterSpacing",subscriber:"readingText",subscriberStateKey:"letterSpacing"}),this.subscribeState({targetState:"text",subscriber:"readingText",subscriberStateKey:"text"}),this.subscribeState({targetState:"isMobile",subscriber:"readingText",subscriberStateKey:"isMobile"}),this.subscribeState({targetState:"fontSize",subscriber:"toolbar",subscriberStateKey:"fontSize"}),this.subscribeState({targetState:"letterSpacing",subscriber:"toolbar",subscriberStateKey:"letterSpacing"}),this.subscribeState({targetState:"userId",subscriber:"toolbar",subscriberStateKey:"userId"}),this.subscribeState({targetState:"isMobile",subscriber:"toolbar",subscriberStateKey:"maxLevel",compute:t=>t?5:7}),this.handleResizeDebounce=((t,e)=>{let n=null;return function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];n&&window.clearTimeout(n),n=window.setTimeout((()=>t(...i)),20)}})((()=>{this.setState({isMobile:l(),fontSize:l()?Math.min(this.$state.fontSize,5):this.$state.fontSize})}))}afterRender(){const{title:t}=this.$state;t&&document.title!==t&&(document.title=t)}afterMount(){const t=new URLSearchParams(window.location.search).get($.ei);this.setState({userId:t||null}),(async()=>{const t=$.wb.OFFLINE,e=new URLSearchParams(window.location.search).get(t),n=e?decodeURIComponent(e):e;if(n){const{title:e,content:i}=await m.getContent(n);if(e===$.RZ.FETCH_TITLE||i===$.RZ.FETCH_CONTENT){const e=function(t){const e=new RegExp(`(?:\\?${t}=)(.+)`,"g"),n=window.location.search.match(e)?.map((e=>e.replace(`?${t}=`,"")));return n&&n.length?n[0]:""}(t),{title:n,content:i}=await m.getContent(e||"");return void this.setState({title:n,text:i})}this.setState({title:e,text:i})}else this.setState({text:$.RZ.FETCH_CONTENT})})()}setEvent(){window.addEventListener("resize",this.handleResizeDebounce)}clearEvent(){window.removeEventListener("resize",this.handleResizeDebounce)}}({$target:L}).mount()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW1QLEVBQW1CLElBQUlMLGdCQUFnQjNOLE9BQU80TixTQUFTQyxRQUFRck0sSUFDbkV1TSxHQUdJRSxFQUFpQkQsRUFDbkJFLG1CQUFtQkYsR0FDbkJBLEVBRUosR0FBSUMsRUFBZ0IsQ0FDbEIsTUFBTSxNQUFFM08sRUFBRixRQUFTRyxTQUFrQjBPLEVBQWN4TyxXQUM3Q3NPLEdBRUYsR0FDRTNPLElBQVVaLEVBQUFBLEdBQUFBLGFBQ1ZlLElBQVlmLEVBQUFBLEdBQUFBLGNBQ1osQ0FDQSxNQUFNMFAsRUErQmhCLFNBQWdDTCxHQUM5QixNQUFNTSxFQUFRLElBQUlDLE9BQVEsU0FBUVAsVUFBd0IsS0FDcERRLEVBQWtCdk8sT0FBTzROLFNBQVNDLE9BQ3JDVyxNQUFNSCxJQUNMSSxLQUFLbk8sR0FBTUEsRUFBRW9PLFFBQVMsSUFBR1gsS0FBbUIsTUFDaEQsT0FBT1EsR0FBbUJBLEVBQWdCL0wsT0FBUytMLEVBQWdCLEdBQUssR0FwQ3BDSSxDQUF1QlosSUFDM0N6TyxNQUFPc1AsRUFBU25QLFFBQVNvUCxTQUN6QlYsRUFBY3hPLFdBQVd5TyxHQUF1QixJQUV4RCxZQURBaEwsS0FBS3VCLFNBQVMsQ0FBRXJGLE1BQU9zUCxFQUFTNUgsS0FBTTZILElBSXhDekwsS0FBS3VCLFNBQVMsQ0FBRXJGLE1BQUFBLEVBQU8wSCxLQUFNdkgsU0FFN0IyRCxLQUFLdUIsU0FBUyxDQUFFcUMsS0FBTXRJLEVBQUFBLEdBQUFBLGlCQVUxQnlCLEdBR0ZzRSxXQUNFekUsT0FBT3dHLGlCQUFpQixTQUFVcEQsS0FBSzZKLHNCQUd6Q3pJLGFBQ0V4RSxPQUFPMEcsb0JBQW9CLFNBQVV0RCxLQUFLNkosd0JEMUs5QixDQUFFbEssUUFBUzZKLElBQVFsSSxTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2xiLXJ0YS12aWV3ZXIvLi9zcmMvY29uc3RhbnRzL2luZGV4LnRzIiwid2VicGFjazovL29sYi1ydGEtdmlld2VyLy4vc3JjL2hlbHBlci9Db250ZW50TG9hZGVyL0NvbnRlbnRMb2FkZXIuZnVuYy50cyIsIndlYnBhY2s6Ly9vbGItcnRhLXZpZXdlci8uL3NyYy9oZWxwZXIvQ29udGVudExvYWRlci9Db250ZW50TG9hZGVyT0ZGTElORS50cyIsIndlYnBhY2s6Ly9vbGItcnRhLXZpZXdlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vbGItcnRhLXZpZXdlci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2xiLXJ0YS12aWV3ZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9vbGItcnRhLXZpZXdlci8uL3NyYy9saWIvdXRpbHMvZnVuY19jb3JlLnRzIiwid2VicGFjazovL29sYi1ydGEtdmlld2VyLy4vc3JjL2xpYi9jb3JlL0NvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9vbGItcnRhLXZpZXdlci8uL3NyYy9jb21wb25lbnRzL0Nsb3NlQnV0dG9uL2luZGV4LnRzIiwid2VicGFjazovL29sYi1ydGEtdmlld2VyLy4vc3JjL2NvbXBvbmVudHMvUmVhZGluZ1RleHQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2xiLXJ0YS12aWV3ZXIvLi9zcmMvbGliL3V0aWxzL2luZGV4LnRzIiwid2VicGFjazovL29sYi1ydGEtdmlld2VyLy4vc3JjL2hlbHBlci9keW5hbWljU3R5bGUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2xiLXJ0YS12aWV3ZXIvLi9zcmMvbGliL3V0aWxzL2xvY2FsU3RvcmFnZS50cyIsIndlYnBhY2s6Ly9vbGItcnRhLXZpZXdlci8uL3NyYy9jb21wb25lbnRzL1Rvb2xiYXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2xiLXJ0YS12aWV3ZXIvLi9zcmMvaGVscGVyL0NvbnRlbnRMb2FkZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2xiLXJ0YS12aWV3ZXIvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2xiLXJ0YS12aWV3ZXIvLi9zcmMvYXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0XG5leHBvcnQgY29uc3QgRVJST1JfTUVTU0FHRVMgPSB7XG4gIEZFVENIX0NPTlRFTlQ6IFwiRmFpbGVkIHRvIGdldCBDb250ZW50XCIsXG4gIEZFVENIX1RJVExFOiBcIlVudGl0bGVkXCIsXG59O1xuXG5leHBvcnQgY29uc3QgQ09OVEVOVF9RVUVSWV9QQVJBTUVURVJfS0VZUyA9IHtcbiAgV0VCOiBcImNvbnRlbnQtc2lnbmVkLXVybFwiLFxuICBPRkZMSU5FOiBcImZpbGVuYW1lXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgVVNFUl9JRF9RVUVSWV9QQVJBTUVURVJfS0VZID0gXCJ1c2VySWRcIjtcbiIsIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cbmltcG9ydCB7IEVSUk9SX01FU1NBR0VTIH0gZnJvbSBcIi4uLy4uL2NvbnN0YW50c1wiO1xuXG5leHBvcnQgY29uc3QgcGFyc2VDb250ZW50ID0gKHhtbERhdGE6IHN0cmluZykgPT4ge1xuICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG4gIGNvbnN0IHBhcnNlZERPTSA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoeG1sRGF0YSwgXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gIGNvbnN0IHRpdGxlID1cbiAgICBwYXJzZWRET00ucXVlcnlTZWxlY3RvcihcInRpdGxlXCIpPy50ZXh0Q29udGVudCB8fCBFUlJPUl9NRVNTQUdFUy5GRVRDSF9USVRMRTtcbiAgY29uc3QgY29udGVudCA9XG4gICAgcGFyc2VkRE9NLnF1ZXJ5U2VsZWN0b3IoXCJjb250ZW50XCIpPy5pbm5lckhUTUwgfHxcbiAgICBFUlJPUl9NRVNTQUdFUy5GRVRDSF9DT05URU5UO1xuICByZXR1cm4geyB0aXRsZSwgY29udGVudCB9O1xufTtcbiIsImltcG9ydCB7IEVSUk9SX01FU1NBR0VTIH0gZnJvbSBcIi4uLy4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgQ29udGVudCwgQ29udGVudExvYWRIZWxwZXIgfSBmcm9tIFwiLi9Db250ZW50TG9hZGVyLmRcIjtcbmltcG9ydCB7IHBhcnNlQ29udGVudCB9IGZyb20gXCIuL0NvbnRlbnRMb2FkZXIuZnVuY1wiO1xuXG5jb25zdCBmZXRjaENvbnRlbnQgPSAoZmlsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IGhhbmRsZXIgPSAoXG4gICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcgfCBQcm9taXNlTGlrZTxzdHJpbmc+KSA9PiB2b2lkLFxuICAgIHJlamVjdDogKHJlYXNvbjogYW55KSA9PiB2b2lkXG4gICkgPT4ge1xuICAgIGlmICghd2luZG93LnJ0YUNvbnRlbnRQcm92aWRlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhlcmUgaXMgbm8gcnRhQ29udGVudFByaXZpZGVyIGluIHdpbmRvdyBvYmplY3QhXCIpO1xuICAgIH1cbiAgICBjb25zdCB4bWxEYXRhID0gd2luZG93LnJ0YUNvbnRlbnRQcm92aWRlci5nZXRDb250ZW50KGZpbGVOYW1lKTtcbiAgICB4bWxEYXRhXG4gICAgICA/IHJlc29sdmUoeG1sRGF0YSlcbiAgICAgIDogcmVqZWN0KG5ldyBFcnJvcihgZmFpbGVkIHRvIGdldCBDb250ZW50IGZyb20gJHtmaWxlTmFtZX1gKSk7XG4gIH07XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oaGFuZGxlcik7XG59O1xuXG5jb25zdCBDb250ZW50TG9hZEhlbHBlck9GRkxJTkU6IENvbnRlbnRMb2FkSGVscGVyID0ge1xuICBnZXRDb250ZW50KGZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZmV0Y2hDb250ZW50KGZpbGVOYW1lKVxuICAgICAgLnRoZW48Q29udGVudD4ocGFyc2VDb250ZW50KVxuICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGl0bGU6IEVSUk9SX01FU1NBR0VTLkZFVENIX1RJVExFLFxuICAgICAgICAgIGNvbnRlbnQ6IEVSUk9SX01FU1NBR0VTLkZFVENIX0NPTlRFTlQsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRlbnRMb2FkSGVscGVyT0ZGTElORTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGNvbnN0IHNoYWxsb3dFcXVhbCA9IChcbiAgb2JqQTogeyBba2V5OiBzdHJpbmcgfCBzeW1ib2xdOiBhbnkgfSxcbiAgb2JqQjogeyBba2V5OiBzdHJpbmcgfCBzeW1ib2xdOiBhbnkgfSxcbiAgY29tcGFyZT86ICguLi5hcmdzOiBhbnlbXSkgPT4gYm9vbGVhbixcbiAgY29tcGFyZUNvbnRleHQ/OiBhbnlcbikgPT4ge1xuICBsZXQgcmV0ID0gY29tcGFyZSA/IGNvbXBhcmUuY2FsbChjb21wYXJlQ29udGV4dCwgb2JqQSwgb2JqQikgOiB1bmRlZmluZWQ7XG5cbiAgaWYgKHJldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICEhcmV0O1xuICB9XG5cbiAgaWYgKE9iamVjdC5pcyhvYmpBLCBvYmpCKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmpBICE9PSBcIm9iamVjdFwiIHx8ICFvYmpBIHx8IHR5cGVvZiBvYmpCICE9PSBcIm9iamVjdFwiIHx8ICFvYmpCKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcbiAgY29uc3Qga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblxuICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBiSGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmJpbmQob2JqQik7XG5cbiAgLy8gVGVzdCBmb3IgQSdzIGtleXMgZGlmZmVyZW50IGZyb20gQi5cbiAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwga2V5c0EubGVuZ3RoOyBpZHgrKykge1xuICAgIGNvbnN0IGtleSA9IGtleXNBW2lkeF07XG5cbiAgICBpZiAoIWJIYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgdmFsdWVBID0gb2JqQVtrZXldO1xuICAgIGNvbnN0IHZhbHVlQiA9IG9iakJba2V5XTtcblxuICAgIHJldCA9IGNvbXBhcmVcbiAgICAgID8gY29tcGFyZS5jYWxsKGNvbXBhcmVDb250ZXh0LCB2YWx1ZUEsIHZhbHVlQiwga2V5KVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAocmV0ID09PSBmYWxzZSB8fCAocmV0ID09PSB1bmRlZmluZWQgJiYgIU9iamVjdC5pcyh2YWx1ZUEsIHZhbHVlQikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnQgY29uc3QgdHVybk9iamVjdEludG9RdWVyeVN0cmluZyA9IChwYXJhbXNPYmplY3Q6IHtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufSkgPT5cbiAgT2JqZWN0LmVudHJpZXMocGFyYW1zT2JqZWN0KVxuICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fT0ke3ZhbHVlfWApXG4gICAgLmpvaW4oXCImXCIpO1xuXG5leHBvcnQgY29uc3QgZXhjbHVkZUtleUZyb21PYmplY3QgPSA8VCA9IHsgW2tleTogc3RyaW5nXTogYW55IH0+KFxuICBvYmo6IFQsXG4gIGtleToga2V5b2YgVFxuKSA9PiB7XG4gIGNvbnN0IG5ld09iaiA9IHsgLi4ub2JqIH07XG4gIGRlbGV0ZSBuZXdPYmpba2V5XTtcblxuICByZXR1cm4gbmV3T2JqO1xufTtcbiIsImltcG9ydCB7IENvbXBvbmVudENvbnN0cnVjdG9yIH0gZnJvbSBcIi4uL3R5cGVzL0NvbXBvbmVudENvbnN0cnVjdG9yLnR5cGVcIjtcbmltcG9ydCB7IHNoYWxsb3dFcXVhbCB9IGZyb20gXCIuLi91dGlscy9mdW5jX2NvcmVcIjtcblxudHlwZSBJU3RhdGVTdWJzY3JpYmVycyA9IHtcbiAgW2tleTogc3RyaW5nXToge1xuICAgIHRhcmdldFN0YXRlOiBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2w7XG4gICAgc3Vic2NyaWJlclN0YXRlS2V5OiBzdHJpbmc7XG4gICAgY29tcHV0ZT86IChzdGF0ZTogYW55W2tleW9mIGFueV0sIHByZXZTdGF0ZTogYW55W2tleW9mIGFueV0pID0+IGFueTtcbiAgfVtdO1xufTtcblxuY2xhc3MgQ29tcG9uZW50PFxuICAvKiBcbiAgUyA6ICRub2RlIHR5cGVcbiAgUyA6IHN0YXRlIHR5cGVcbiovXG4gIFMgZXh0ZW5kcyB7IFt2YWx1ZTogc3RyaW5nIHwgc3ltYm9sXTogYW55IH0gPSB7XG4gICAgW3ZhbHVlOiBzdHJpbmcgfCBzeW1ib2xdOiBhbnk7XG4gIH0sXG4gIE4gZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudFxuPiB7XG4gICR0YXJnZXQ6IEVsZW1lbnQ7XG4gICRub2RlPzogTjtcbiAgJHN0YXRlOiBTO1xuICAkcHJvcHM6IHtcbiAgICBpZD86IHN0cmluZztcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgZGlzcGxheT86IGJvb2xlYW47XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuICB9O1xuXG4gICRjaGlsZHJlbjogTWFwPHN0cmluZywgQ29tcG9uZW50PjtcbiAgJHN0YXRlU3Vic2NyaWJlcnM6IElTdGF0ZVN1YnNjcmliZXJzO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICAkdGFyZ2V0LFxuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBjbGFzc05hbWUsXG4gICAgaWQsXG4gICAgZGlzcGxheSA9IHRydWUsXG4gIH06IENvbXBvbmVudENvbnN0cnVjdG9yPFM+KSB7XG4gICAgdGhpcy4kdGFyZ2V0ID0gJHRhcmdldDtcbiAgICB0aGlzLiRjaGlsZHJlbiA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLiRzdGF0ZSA9IHsgLi4uaW5pdGlhbFN0YXRlIH0gYXMgUztcbiAgICB0aGlzLiRzdGF0ZVN1YnNjcmliZXJzID0ge307XG4gICAgdGhpcy4kcHJvcHMgPSBuZXcgUHJveHk8e1xuICAgICAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgICAgZGlzcGxheT86IGJvb2xlYW47XG4gICAgICBbdmFsdWU6IHN0cmluZyB8IHN5bWJvbF06IGFueTtcbiAgICB9PihcbiAgICAgIHsgY2xhc3NOYW1lLCBkaXNwbGF5LCBpZCB9LFxuICAgICAge1xuICAgICAgICBzZXQ6IChwcm9wcywga2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHByZXZQcm9wcyA9IHsgLi4ucHJvcHMgfTtcbiAgICAgICAgICBwcm9wc1trZXldID0gdmFsdWU7XG5cbiAgICAgICAgICBpZiAoIXNoYWxsb3dFcXVhbChwcmV2UHJvcHMsIHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIHRlbXBsYXRlKCkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgYmVmb3JlUmVuZGVyKCkge31cblxuICBhZnRlclJlbmRlcigpIHt9XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIHJlbmRlciDsnbTsoITsl5AsIGJlZm9yZVJlbmRlciDrqZTshozrk5wg7Zi47LacXG4gICAgdGhpcy5iZWZvcmVSZW5kZXIoKTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGUoKTtcbiAgICBjb25zdCB7IGRpc3BsYXksIGNsYXNzTmFtZSwgaWQgfSA9IHRoaXMuJHByb3BzO1xuXG4gICAgLy8gaWQg7KCB7JqpXG4gICAgaWYgKGlkICYmIHRoaXMuJG5vZGUpIHtcbiAgICAgIHRoaXMuJG5vZGUuaWQgPSBpZDtcbiAgICB9XG4gICAgLy8gY2xhc3NOYW1lIOyggeyaqVxuICAgIGlmIChjbGFzc05hbWUgJiYgdGhpcy4kbm9kZSkge1xuICAgICAgdGhpcy4kbm9kZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgfVxuICAgIGlmICghZGlzcGxheSAmJiB0aGlzLiRub2RlKSB7XG4gICAgICB0aGlzLiRub2RlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTogbm9uZTtcIik7XG4gICAgfVxuXG4gICAgLy8g66eM7JW9IHRlbXBsYXRl7J20IOyhtOyerO2VmOyngCDslYrsnLzrqbQsIHJlbmRlciDtlaAg7ZWE7JqU6rCAIOyXhuuLpC4gKGNoaWxk7J2YIOqyveyasOuKlCBwcm94eeydmCBzZXR0ZXLroZwg7J247ZW0IOqwgeyekOydmCByZW5kZXIg66mU7ISc65Oc6rCAIO2YuOy2nOuQnOuLpC4pXG4gICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAvLyBpbm5lckhUTUzsnbQg7IiY7KCV65CY66+A66GcLCDqt7gg7J207KCE7JeQIOu2gOywqeuQmOyWtOyeiOuNmCBjaGlsZHJlbiDrk6TsnYQgdW5Nb3VudCDsi5ztgqjri6QuXG4gICAgICBpZiAodGhpcy4kbm9kZSkge1xuICAgICAgICB0aGlzLiRjaGlsZHJlbj8uZm9yRWFjaCgoQ2hpbGRDb21wb25lbnQpID0+IENoaWxkQ29tcG9uZW50LnVuTW91bnQoKSk7XG4gICAgICAgIHRoaXMuY2xlYXJFdmVudCgpO1xuICAgICAgICB0aGlzLiRub2RlLmlubmVySFRNTCA9IHRlbXBsYXRlO1xuICAgICAgICB0aGlzLnNldEV2ZW50KCk7XG4gICAgICAgIC8vIGlubmVySFRNTCDqsLHsi6DsnbQg7JmE66OM65Cc7ZuELCBjaGlsZHJlbiDrk6TsnYQgbW91bnQg7Iuc7YKo64ukLlxuICAgICAgICB0aGlzLiRjaGlsZHJlbj8uZm9yRWFjaCgoQ2hpbGRDb21wb25lbnQpID0+IENoaWxkQ29tcG9uZW50Lm1vdW50KCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlbmRlciDsnbTtm4QsIGFmdGVyUmVuZGVyIOuplOyGjOuTnCDtmLjstpxcbiAgICB0aGlzLmFmdGVyUmVuZGVyKCk7XG4gIH1cblxuICBzZXRTdGF0ZShuZXdTdGF0ZTogUGFydGlhbDxTPikge1xuICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuJHN0YXRlO1xuICAgIHRoaXMuJHN0YXRlID0geyAuLi50aGlzLiRzdGF0ZSwgLi4ubmV3U3RhdGUgfTtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbChwcmV2U3RhdGUsIHRoaXMuJHN0YXRlKSkge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIC8vIOq1rOuPheyekOuTpOydtCDsnojsnLzrqbQuLi5cbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuJHN0YXRlU3Vic2NyaWJlcnMpLmxlbmd0aCAmJlxuICAgICAgICB0aGlzLnNldFN1YnNjcmliZXJzU3RhdGUodGhpcy4kc3RhdGUsIHByZXZTdGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgc3Vic2NyaWJlU3RhdGUoe1xuICAgIHRhcmdldFN0YXRlLFxuICAgIHN1YnNjcmliZXIsXG4gICAgc3Vic2NyaWJlclN0YXRlS2V5LFxuICAgIGNvbXB1dGUsXG4gIH06IHtcbiAgICB0YXJnZXRTdGF0ZToga2V5b2YgUztcbiAgICBzdWJzY3JpYmVyOiBzdHJpbmc7XG4gICAgc3Vic2NyaWJlclN0YXRlS2V5OiBhbnk7XG4gICAgY29tcHV0ZT86IChcbiAgICAgIHN0YXRlVmFsdWU6IFNbdHlwZW9mIHRhcmdldFN0YXRlXSxcbiAgICAgIHByZXZTdGF0ZTogU1t0eXBlb2YgdGFyZ2V0U3RhdGVdXG4gICAgKSA9PiBhbnk7XG4gIH0pIHtcbiAgICBpZiAodGhpcy4kY2hpbGRyZW4uZ2V0KHN1YnNjcmliZXIpKSB7XG4gICAgICB0aGlzLiRzdGF0ZVN1YnNjcmliZXJzW3N1YnNjcmliZXJdID0gW1xuICAgICAgICAuLi4odGhpcy4kc3RhdGVTdWJzY3JpYmVyc1tzdWJzY3JpYmVyXSB8fCBbXSksXG4gICAgICAgIHtcbiAgICAgICAgICBzdWJzY3JpYmVyU3RhdGVLZXksXG4gICAgICAgICAgdGFyZ2V0U3RhdGUsXG4gICAgICAgICAgY29tcHV0ZSxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgfVxuICB9XG5cbiAgc2V0U3Vic2NyaWJlcnNTdGF0ZShuZXdTdGF0ZTogUywgcHJldlN0YXRlOiBTKSB7XG4gICAgLy8gbmV3U3RhdGUg66W8IOyInO2ajO2VmOupsCwg6rCBIGNoaWxkcmVu7J20IOyCrOyaqe2VmOuKlCDsg4Htg5zrp4wg6rOo65287IScIHNldFN0YXRl7ZWc64ukLlxuICAgIC8vIOyDge2DnOqwkuydhCBjdXN0b20g7ZWY6rKMIOuzgOqyve2VmOugpOuptCwg7IOB7IaN67Cb7J2AIOy7tO2PrOuEjO2KuCDtgbTrnpjsiqTsl5DshJwgc2V0U3Vic2NyaWJlcnNTdGF0ZSBvdmVyUmlkZSDtlZjsl6wg7J6R7ISx7ZW07JW87ZWc64ukLlxuICAgIGZvciAoY29uc3QgW3N1YnNjcmliZXJOYW1lLCBzdWJzY3JpYmVkU3RhdGVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy4kc3RhdGVTdWJzY3JpYmVyc1xuICAgICkpIHtcbiAgICAgIGNvbnN0IG5ld0NoaWxkU3RhdGUgPSBzdWJzY3JpYmVkU3RhdGUucmVkdWNlPHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgICAgfT4oKHN0YXRlLCB7IHRhcmdldFN0YXRlLCBzdWJzY3JpYmVyU3RhdGVLZXksIGNvbXB1dGUgfSkgPT4ge1xuICAgICAgICBzdGF0ZVtzdWJzY3JpYmVyU3RhdGVLZXldID1cbiAgICAgICAgICBjb21wdXRlPy4obmV3U3RhdGVbdGFyZ2V0U3RhdGVdLCBwcmV2U3RhdGVbdGFyZ2V0U3RhdGVdKSB8fFxuICAgICAgICAgIG5ld1N0YXRlW3RhcmdldFN0YXRlXTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfSwge30pO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZ2V0KHN1YnNjcmliZXJOYW1lKT8uc2V0U3RhdGUobmV3Q2hpbGRTdGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgYmVmb3JlTW91bnQoKSB7fVxuXG4gIG1vdW50KCkge1xuICAgIHRoaXMuJGNoaWxkcmVuPy5mb3JFYWNoKChDaGlsZENvbXBvbmVudCkgPT4gQ2hpbGRDb21wb25lbnQubW91bnQoKSk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICB0aGlzLnNldEV2ZW50KCk7XG4gICAgdGhpcy5iZWZvcmVNb3VudCgpO1xuICAgIHRoaXMuJG5vZGUgJiYgdGhpcy4kdGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuJG5vZGUpO1xuICAgIHRoaXMuYWZ0ZXJNb3VudCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYWZ0ZXJNb3VudCgpIHt9XG5cbiAgYmVmb3JlVW5Nb3VudCgpIHt9XG5cbiAgdW5Nb3VudCgpIHtcbiAgICB0aGlzLmJlZm9yZVVuTW91bnQoKTtcbiAgICB0aGlzLmNsZWFyRXZlbnQoKTtcbiAgICB0aGlzLiRub2RlICYmIHRoaXMuJHRhcmdldC5yZW1vdmVDaGlsZCh0aGlzLiRub2RlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldEV2ZW50KCkge31cblxuICBjbGVhckV2ZW50KCkge31cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50O1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiLi4vLi4vbGliL2NvcmUvQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBDb21wb25lbnRDb25zdHJ1Y3RvciB9IGZyb20gXCIuLi8uLi9saWIvdHlwZXMvQ29tcG9uZW50Q29uc3RydWN0b3IudHlwZVwiO1xuXG5jbGFzcyBDbG9zZUJ1dHRvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIGhhbmRsZUNsb3NlOiBFdmVudExpc3RlbmVyO1xuXG4gIGNvbnN0cnVjdG9yKHsgJHRhcmdldCB9OiBDb21wb25lbnRDb25zdHJ1Y3Rvcikge1xuICAgIHN1cGVyKHsgJHRhcmdldCwgaWQ6IFwiY2xvc2UtYnV0dG9uXCIgfSk7XG4gICAgdGhpcy4kbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy4kbm9kZS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIkNsb3NlIFJlZmxvd2FibGUgVmlld2VyXCIpO1xuXG4gICAgdGhpcy5oYW5kbGVDbG9zZSA9IChlKSA9PiB7XG4gICAgICBpZiAoIShlLnRhcmdldCBpbnN0YW5jZW9mIE5vZGUpKSByZXR1cm47XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB3aW5kb3cuY2xvc2UoKTtcbiAgICB9O1xuICB9XG5cbiAgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGA8c3ZnIHRhYkluZGV4PTAgYXJpYS1sYWJlbD1cIkNsb3NlIFJlZmxvd2FibGUgVmlld2VyXCIgcm9sZT1cImJ1dHRvblwiIHdpZHRoPVwiMzJcIiBoZWlnaHQ9XCIzMlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48ZyBmaWxsLXJ1bGU9XCJub256ZXJvXCIgZmlsbD1cIm5vbmVcIj48cGF0aCBkPVwiTTE2IDIuNUM4LjU0NCAyLjUgMi41IDguNTQ0IDIuNSAxNlM4LjU0NCAyOS41IDE2IDI5LjUgMjkuNSAyMy40NTYgMjkuNSAxNiAyMy40NTYgMi41IDE2IDIuNXpcIiBmaWxsPVwiIzNDM0M1MlwiLz48cGF0aCBkPVwiTTE2IDJjNy43MzIgMCAxNCA2LjI2OCAxNCAxNHMtNi4yNjggMTQtMTQgMTRTMiAyMy43MzIgMiAxNiA4LjI2OCAyIDE2IDJ6bTAgMS4yNzNDOC45NyAzLjI3MyAzLjI3MyA4Ljk3IDMuMjczIDE2YzAgNy4wMyA1LjY5OCAxMi43MjcgMTIuNzI3IDEyLjcyNyA3LjAzIDAgMTIuNzI3LTUuNjk4IDEyLjcyNy0xMi43MjdDMjguNzI3IDguOTcgMjMuMDMgMy4yNzMgMTYgMy4yNzN6bS01LjY3OCA3LjA0OWMuNDMtLjQzIDEuMTIzLS40MyAxLjU1MiAwTDE2IDE0LjQ0OGw0LjEyNi00LjEyNWExLjA5NiAxLjA5NiAwIDEgMSAxLjU1MiAxLjU1MkwxNy41NTIgMTZsNC4xMjYgNC4xMjVhMS4wOTYgMS4wOTYgMCAxIDEtMS41NTIgMS41NTJMMTYgMTcuNTUzbC00LjEyNiA0LjEyNWExLjA5NSAxLjA5NSAwIDAgMS0xLjU1MiAwIDEuMDk2IDEuMDk2IDAgMCAxIDAtMS41NTJMMTQuNDQ4IDE2bC00LjEyNi00LjEyNmExLjA5NiAxLjA5NiAwIDAgMSAwLTEuNTUyelwiIGZpbGw9XCIjRkZGXCIvPjwvZz48L3N2Zz5gO1xuICB9XG5cbiAgc2V0RXZlbnQoKSB7XG4gICAgdGhpcy4kbm9kZT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlQ2xvc2UpO1xuICAgIHRoaXMuJG5vZGU/LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGVuYWJsZUtleURvd24gYXMgRXZlbnRMaXN0ZW5lcik7XG4gIH1cblxuICBjbGVhckV2ZW50KCkge1xuICAgIHRoaXMuJG5vZGU/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUNsb3NlKTtcbiAgICB0aGlzLiRub2RlPy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlbmFibGVLZXlEb3duIGFzIEV2ZW50TGlzdGVuZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENsb3NlQnV0dG9uO1xuXG5mdW5jdGlvbiBlbmFibGVLZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnNvbGUubG9nKFwiZW50ZXJcIik7XG4gICAgKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCk/LmNsaWNrKCk7XG4gIH1cbn1cbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSBcIi4uLy4uL2xpYi9jb3JlL0NvbXBvbmVudFwiO1xuaW1wb3J0IHsgQ29tcG9uZW50Q29uc3RydWN0b3IgfSBmcm9tIFwiLi4vLi4vbGliL3R5cGVzL0NvbXBvbmVudENvbnN0cnVjdG9yLnR5cGVcIjtcblxudHlwZSBTdGF0ZSA9IHtcbiAgdGV4dDogc3RyaW5nO1xuICBmb250U2l6ZTogbnVtYmVyO1xuICBpc01vYmlsZT86IGJvb2xlYW47XG4gIGxldHRlclNwYWNpbmc6IG51bWJlcjtcbn07XG5cbmNvbnN0IGRlZmF1bHRTdGF0ZTogU3RhdGUgPSB7XG4gIHRleHQ6IFwiVGVzdFwiLFxuICBmb250U2l6ZTogNCxcbiAgaXNNb2JpbGU6IGZhbHNlLFxuICBsZXR0ZXJTcGFjaW5nOiAxLFxufTtcblxuY2xhc3MgUmVhZGluZ1RleHQgZXh0ZW5kcyBDb21wb25lbnQ8U3RhdGU+IHtcbiAgY29uc3RydWN0b3IoeyAkdGFyZ2V0LCBpbml0aWFsU3RhdGUgfTogQ29tcG9uZW50Q29uc3RydWN0b3I8U3RhdGU+KSB7XG4gICAgc3VwZXIoe1xuICAgICAgJHRhcmdldCxcbiAgICAgIGluaXRpYWxTdGF0ZTogeyAuLi5kZWZhdWx0U3RhdGUsIC4uLmluaXRpYWxTdGF0ZSB9LFxuICAgICAgaWQ6IFwicmVhZGluZy10ZXh0XCIsXG4gICAgfSk7XG4gICAgdGhpcy4kbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIH1cblxuICB0ZW1wbGF0ZSgpIHtcbiAgICBjb25zdCB7IHRleHQgfSA9IHRoaXMuJHN0YXRlO1xuICAgIHJldHVybiBgXG4gICAgICAke3RleHR9XG4gICAgICA8ZGl2IGlkPVwiYWRkaXRpb25hbC1zY3JvbGwtYXJlYVwiIGNsYXNzPVwiYWRkaXRpb25hbC1zY3JvbGwtYXJlYVwiLz5cbiAgICBgO1xuICB9XG5cbiAgYWZ0ZXJSZW5kZXIoKSB7XG4gICAgY29uc3QgeyBmb250U2l6ZSwgaXNNb2JpbGUsIGxldHRlclNwYWNpbmcgfSA9IHRoaXMuJHN0YXRlO1xuICAgIHRoaXMuJG5vZGU/LmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICBcInNpemUtMVwiLFxuICAgICAgXCJzaXplLTJcIixcbiAgICAgIFwic2l6ZS0zXCIsXG4gICAgICBcInNpemUtNFwiLFxuICAgICAgXCJzaXplLTVcIixcbiAgICAgIFwic2l6ZS02XCIsXG4gICAgICBcInNpemUtN1wiXG4gICAgKTtcblxuICAgIHRoaXMuJG5vZGU/LmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICBcImxldHRlci1zcGFjaW5nLTFcIixcbiAgICAgIFwibGV0dGVyLXNwYWNpbmctMlwiLFxuICAgICAgXCJsZXR0ZXItc3BhY2luZy0zXCIsXG4gICAgICBcImxldHRlci1zcGFjaW5nLTRcIixcbiAgICAgIFwibGV0dGVyLXNwYWNpbmctNVwiLFxuICAgICAgXCJsZXR0ZXItc3BhY2luZy02XCIsXG4gICAgICBcImxldHRlci1zcGFjaW5nLTdcIlxuICAgICk7XG4gICAgdGhpcy4kbm9kZT8uY2xhc3NMaXN0LnJlbW92ZShcIm1vYmlsZVwiKTtcbiAgICB0aGlzLiRub2RlPy5jbGFzc0xpc3QuYWRkKGBsZXR0ZXItc3BhY2luZy0ke2xldHRlclNwYWNpbmd9YCk7XG4gICAgdGhpcy4kbm9kZT8uY2xhc3NMaXN0LmFkZChgc2l6ZS0ke2ZvbnRTaXplfWApO1xuICAgIGlzTW9iaWxlICYmIHRoaXMuJG5vZGU/LmNsYXNzTGlzdC5hZGQoXCJtb2JpbGVcIik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVhZGluZ1RleHQ7XG4iLCJleHBvcnQgY29uc3QgJCA9XG4gIDxFIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDogRWxlbWVudCkgPT5cbiAgKHF1ZXJ5OiBzdHJpbmcpOiBFIHwgbnVsbCA9PlxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7XG5leHBvcnQgY29uc3QgJCQgPVxuICA8RSBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnQ6IEVsZW1lbnQpID0+XG4gIChxdWVyeTogc3RyaW5nKTogTm9kZUxpc3RPZjxFPiA9PlxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbDxFPihxdWVyeSk7XG5cbmV4cG9ydCBjb25zdCBpc05hcnJvdyA9ICgpID0+IHtcbiAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIDw9IDcwMDtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWJvdW5jZSA9IDxUIGV4dGVuZHMgYW55W10+KFxuICBmbjogKC4uLmFyZ3M6IFQpID0+IHZvaWQsXG4gIGRlbGF5OiBudW1iZXJcbikgPT4ge1xuICBsZXQgdGltZUlkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICByZXR1cm4gKC4uLmFyZ3M6IFQpID0+IHtcbiAgICBpZiAodGltZUlkKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVJZCk7XG4gICAgfVxuICAgIHRpbWVJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IGZuKC4uLmFyZ3MpLCBkZWxheSk7XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgJCwgJCQgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWxzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3SW5wdXQoXG4gIHR5cGU6IFwiZm9udC1zaXplXCIgfCBcImxldHRlci1zcGFjZVwiLFxuICBzdHlsZURlZ3JlZTogbnVtYmVyLFxuICBtYXhMZXZlbDogbnVtYmVyLFxuICBub2RlPzogRWxlbWVudFxuKSB7XG4gIGlmICghbm9kZSkgcmV0dXJuO1xuICBjb25zdCBpbnB1dEVsID0gJDxIVE1MSW5wdXRFbGVtZW50Pihub2RlKShgaW5wdXQjJHt0eXBlfWApO1xuXG4gIGlmICghaW5wdXRFbCB8fCAhKGlucHV0RWwgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSkgcmV0dXJuO1xuXG4gIGNvbnN0IHNldHRpbmcgPSBzdHlsZURlZ3JlZSAtIDE7XG4gIGNvbnN0IHBvc2l0aW9uID0gKHNldHRpbmcgLyAobWF4TGV2ZWwgLSAxKSkgKiAxMDA7XG4gIGlucHV0RWwubWF4ID0gbWF4TGV2ZWwudG9TdHJpbmcoMTApO1xuICBpbnB1dEVsLnZhbHVlID0gc3R5bGVEZWdyZWUudG9TdHJpbmcoMTApO1xuICBpbnB1dEVsLnN0eWxlLmJhY2tncm91bmQgPSBgXG4gIGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgXG4gICAgICByZ2JhKDAsIDAsIDAsIDApIDAlLCBcbiAgICAgIHJnYmEoMCwgMCwgMCwgMCkgNC4zMzMlLFxuICAgICAgIzNjZiA0LjMzMyUsXG4gICAgICAjM2NmICR7cG9zaXRpb259JSxcbiAgICAgICNmZmYgJHtwb3NpdGlvbn0lLFxuICAgICAgI2ZmZiA5NSUsIFxuICAgICAgcmdiYSgwLCAwLCAwLCAwKSA5NSUsXG4gICAgICByZ2JhKDAsIDAsIDAsIDApIDEwMCVcbiAgKVxuICBgO1xuICAvLyBzcGFuXG4gIGNvbnN0IHNwYW5FbHMgPSAkJDxIVE1MU3BhbkVsZW1lbnQ+KG5vZGUpKGAuJHt0eXBlfS1jb250YWluZXIgc3BhbmApO1xuICBzcGFuRWxzLmZvckVhY2goKHNwYW5FbCwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBzdGVwID0gc3R5bGVEZWdyZWU7XG4gICAgY29uc3Qgc3RlcE51bSA9IGluZGV4ICsgMTtcblxuICAgIGxldCBiYWNrZ3JvdW5kO1xuICAgIGlmIChzdGVwTnVtIDwgc3RlcCkge1xuICAgICAgYmFja2dyb3VuZCA9IFwiIzAwY2NmZlwiO1xuICAgIH0gZWxzZSBpZiAoc3RlcE51bSA9PT0gc3RlcCkge1xuICAgICAgYmFja2dyb3VuZCA9IFwiI2ZmZlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYWNrZ3JvdW5kID0gXCIjZjJmMmYyXCI7XG4gICAgfVxuICAgIHNwYW5FbC5zdHlsZS5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0VGhlbWUoXG4gIHRvb2xzOiBFbGVtZW50IHwgbnVsbCxcbiAgcmVhZGluZ1RleHRFbDogRWxlbWVudCB8IG51bGxcbikge1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2YxZjFmMVwiO1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmNvbG9yID0gXCIjMjIyXCI7XG4gIHRvb2xzPy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6ICMzQzNDNTJcIik7XG4gIHNldEFyaWFDaGVja2VkKFwiZGVmYXVsdFwiKTtcbiAgaWYgKHJlYWRpbmdUZXh0RWwpIHtcbiAgICByZWFkaW5nVGV4dEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJzZXBpYVwiKTtcbiAgICByZWFkaW5nVGV4dEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJkYXJrXCIpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTZXBpYVRoZW1lKFxuICB0b29sczogRWxlbWVudCB8IG51bGwsXG4gIHJlYWRpbmdUZXh0RWw6IEVsZW1lbnQgfCBudWxsXG4pIHtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNGN0U5RDRcIjtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5jb2xvciA9IFwiIzYwM0QxMVwiO1xuICB0b29scz8uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiAjNjAzRDExXCIpO1xuICBzZXRBcmlhQ2hlY2tlZChcInNlcGlhXCIpO1xuICBpZiAocmVhZGluZ1RleHRFbCkge1xuICAgIHJlYWRpbmdUZXh0RWwuY2xhc3NMaXN0LnJlbW92ZShcImRhcmtcIik7XG4gICAgcmVhZGluZ1RleHRFbC5jbGFzc0xpc3QuYWRkKFwic2VwaWFcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERhcmtUaGVtZShcbiAgdG9vbHM6IEVsZW1lbnQgfCBudWxsLFxuICByZWFkaW5nVGV4dEVsOiBFbGVtZW50IHwgbnVsbFxuKSB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjMTYxOTFDXCI7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuY29sb3IgPSBcIiNmZmZcIjtcbiAgdG9vbHM/LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogIzMzMzMzM1wiKTtcbiAgc2V0QXJpYUNoZWNrZWQoXCJkYXJrXCIpO1xuICBpZiAocmVhZGluZ1RleHRFbCkge1xuICAgIHJlYWRpbmdUZXh0RWwuY2xhc3NMaXN0LnJlbW92ZShcInNlcGlhXCIpO1xuICAgIHJlYWRpbmdUZXh0RWwuY2xhc3NMaXN0LmFkZChcImRhcmtcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFRoZW1lKFxuICB0aGVtZTogc3RyaW5nLFxuICB0b29sczogRWxlbWVudCB8IG51bGwsXG4gIHJlYWRpbmdUZXh0RWw6IEVsZW1lbnQgfCBudWxsXG4pIHtcbiAgaWYgKHRoZW1lID09PSBcImRlZmF1bHRcIikge1xuICAgIHNldERlZmF1bHRUaGVtZSh0b29scywgcmVhZGluZ1RleHRFbCk7XG4gIH0gZWxzZSBpZiAodGhlbWUgPT09IFwic2VwaWFcIikge1xuICAgIHNldFNlcGlhVGhlbWUodG9vbHMsIHJlYWRpbmdUZXh0RWwpO1xuICB9IGVsc2UgaWYgKHRoZW1lID09PSBcImRhcmtcIikge1xuICAgIHNldERhcmtUaGVtZSh0b29scywgcmVhZGluZ1RleHRFbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0QXJpYUNoZWNrZWQoaWQ6IFwiZGVmYXVsdFwiIHwgXCJzZXBpYVwiIHwgXCJkYXJrXCIpIHtcbiAgY29uc3QgaWRzID0gW1wiZGVmYXVsdFwiLCBcInNlcGlhXCIsIFwiZGFya1wiXTtcbiAgZG9jdW1lbnRcbiAgICAuZ2V0RWxlbWVudEJ5SWQoYGNvbG9yLXBhbGV0dGUgJHtpZH1gKVxuICAgID8uc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwidHJ1ZVwiKTtcblxuICBpZHNcbiAgICAuZmlsdGVyKChpKSA9PiBpICE9PSBpZClcbiAgICAuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKGBjb2xvci1wYWxldHRlICR7aX1gKVxuICAgICAgICA/LnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgIH0pO1xufVxuIiwiZXhwb3J0IGNvbnN0IHNhdmVGb250VG9Mb2NhbFN0b3JhZ2UgPSAoXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgbmV3Rm9udFNpemU6IG51bWJlclxuKSA9PiB7XG4gIGlmICghdXNlcklkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc2V0dGluZ3NLZXkgPSBgJHt1c2VySWR9LXNldHRpbmdgO1xuICBjb25zdCBleGlzdGluZ1NldHRpbmdzID0gbG9hZFVzZXJTZXR0aW5nRnJvbUxvY2FsU3RvcmFnZSh1c2VySWQpO1xuXG4gIGNvbnN0IHVwZGF0ZWRTZXR0aW5ncyA9IHtcbiAgICAuLi5leGlzdGluZ1NldHRpbmdzLFxuICAgIGZvbnRTaXplOiBuZXdGb250U2l6ZSxcbiAgfTtcblxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzZXR0aW5nc0tleSwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFNldHRpbmdzKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2F2ZUxldHRlclNwYWNlVG9Mb2NhbFN0b3JhZ2UgPSAoXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgbmV3TGV0dGVyU3BhY2luZzogbnVtYmVyXG4pID0+IHtcbiAgaWYgKCF1c2VySWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBzZXR0aW5nc0tleSA9IGAke3VzZXJJZH0tc2V0dGluZ2A7XG4gIGNvbnN0IGV4aXN0aW5nU2V0dGluZ3MgPSBsb2FkVXNlclNldHRpbmdGcm9tTG9jYWxTdG9yYWdlKHVzZXJJZCk7XG5cbiAgY29uc3QgdXBkYXRlZFNldHRpbmdzID0ge1xuICAgIC4uLmV4aXN0aW5nU2V0dGluZ3MsXG4gICAgbGV0dGVyU3BhY2luZzogbmV3TGV0dGVyU3BhY2luZyxcbiAgfTtcblxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzZXR0aW5nc0tleSwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFNldHRpbmdzKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2F2ZVRoZW1lVG9Mb2NhbFN0b3JhZ2UgPSAoXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgbmV3VGhlbWU6IHN0cmluZ1xuKSA9PiB7XG4gIGlmICghdXNlcklkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc2V0dGluZ3NLZXkgPSBgJHt1c2VySWR9LXNldHRpbmdgO1xuICBjb25zdCBleGlzdGluZ1NldHRpbmdzID0gbG9hZFVzZXJTZXR0aW5nRnJvbUxvY2FsU3RvcmFnZSh1c2VySWQpO1xuXG4gIGNvbnN0IHVwZGF0ZWRTZXR0aW5ncyA9IHtcbiAgICAuLi5leGlzdGluZ1NldHRpbmdzLFxuICAgIHRoZW1lOiBuZXdUaGVtZSxcbiAgfTtcblxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzZXR0aW5nc0tleSwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFNldHRpbmdzKSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9hZFVzZXJTZXR0aW5nRnJvbUxvY2FsU3RvcmFnZSA9ICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBzZXR0aW5nc0tleSA9IGAke3VzZXJJZH0tc2V0dGluZ2A7XG4gIGNvbnN0IHNldHRpbmdzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc2V0dGluZ3NLZXkpO1xuXG4gIHJldHVybiBzZXR0aW5ncyA/IEpTT04ucGFyc2Uoc2V0dGluZ3MpIDoge307XG59O1xuIiwiaW1wb3J0IHtcbiAgZHJhd0lucHV0LFxuICBzZXREYXJrVGhlbWUsXG4gIHNldERlZmF1bHRUaGVtZSxcbiAgc2V0U2VwaWFUaGVtZSxcbiAgc2V0VGhlbWUsXG59IGZyb20gXCIuLi8uLi9oZWxwZXIvZHluYW1pY1N0eWxlXCI7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gXCIuLi8uLi9saWIvY29yZS9Db21wb25lbnRcIjtcbmltcG9ydCB7IENvbXBvbmVudENvbnN0cnVjdG9yIH0gZnJvbSBcIi4uLy4uL2xpYi90eXBlcy9Db21wb25lbnRDb25zdHJ1Y3Rvci50eXBlXCI7XG5pbXBvcnQgeyAkLCAkJCB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHNcIjtcbmltcG9ydCB7XG4gIGxvYWRVc2VyU2V0dGluZ0Zyb21Mb2NhbFN0b3JhZ2UsXG4gIHNhdmVGb250VG9Mb2NhbFN0b3JhZ2UsXG4gIHNhdmVMZXR0ZXJTcGFjZVRvTG9jYWxTdG9yYWdlLFxuICBzYXZlVGhlbWVUb0xvY2FsU3RvcmFnZSxcbn0gZnJvbSBcIi4uLy4uL2xpYi91dGlscy9sb2NhbFN0b3JhZ2VcIjtcblxudHlwZSBTdGF0ZSA9IHtcbiAgZm9udFNpemU6IG51bWJlcjtcbiAgbWF4TGV2ZWw6IG51bWJlcjtcbiAgbGV0dGVyU3BhY2luZzogbnVtYmVyO1xuICB1c2VySWQ6IHN0cmluZyB8IG51bGw7XG59O1xuXG50eXBlIERpc3BhdGNoID0ge1xuICBvbkZvbnRTaXplQ2hhbmdlPzogKGZvbnRTaXplOiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uTGV0dGVyU3BhY2luZ0NoYW5nZT86IChsZXR0ZXJTcGFjaW5nOiBudW1iZXIpID0+IHZvaWQ7XG59O1xuXG5jb25zdCBkZWZhdWx0U3RhdGUgPSB7XG4gIGZvbnRTaXplOiA0LFxuICBtYXhMZXZlbDogNyxcbiAgbGV0dGVyU3BhY2luZzogMixcbiAgdXNlcklkOiBudWxsLFxufTtcbmNsYXNzIFRvb2xiYXIgZXh0ZW5kcyBDb21wb25lbnQ8U3RhdGU+IHtcbiAgaGFuZGxlRm9udFNpemVDaGFuZ2U6IEV2ZW50TGlzdGVuZXI7XG4gIGhhbmRsZUZvbnRTaXplVG91Y2hTdGFydDogRXZlbnRMaXN0ZW5lcjtcbiAgaGFuZGxlRm9udFNpemVUb3VjaEVuZDogRXZlbnRMaXN0ZW5lcjtcbiAgaGFuZGxlTGV0dGVyU3BhY2luZ0NoYW5nZTogRXZlbnRMaXN0ZW5lcjtcbiAgb25Gb250U2l6ZUNoYW5nZT86ICh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkO1xuICBvbkxldHRlclNwYWNpbmdDaGFuZ2U/OiAodmFsdWU6IG51bWJlcikgPT4gdm9pZDtcblxuICBpc0luaXQ6IGJvb2xlYW4gPSB0cnVlO1xuICBpc0xvY2FsU3RvcmFnZUxvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICAkdGFyZ2V0LFxuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBvbkZvbnRTaXplQ2hhbmdlLFxuICAgIG9uTGV0dGVyU3BhY2luZ0NoYW5nZSxcbiAgfTogQ29tcG9uZW50Q29uc3RydWN0b3I8U3RhdGU+ICYgRGlzcGF0Y2gpIHtcbiAgICBzdXBlcih7XG4gICAgICAkdGFyZ2V0LFxuICAgICAgaW5pdGlhbFN0YXRlOiB7IC4uLmRlZmF1bHRTdGF0ZSwgLi4uaW5pdGlhbFN0YXRlIH0sXG4gICAgICBpZDogXCJ0b29sc1wiLFxuICAgIH0pO1xuICAgIHRoaXMuJG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMub25Gb250U2l6ZUNoYW5nZSA9IG9uRm9udFNpemVDaGFuZ2U7XG4gICAgdGhpcy5vbkxldHRlclNwYWNpbmdDaGFuZ2UgPSBvbkxldHRlclNwYWNpbmdDaGFuZ2U7XG5cbiAgICB0aGlzLmhhbmRsZUZvbnRTaXplQ2hhbmdlID0gKGUpID0+IHtcbiAgICAgIGlmICghKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkpIHJldHVybjtcbiAgICAgIGNvbnN0IHsgZm9udFNpemUsIHVzZXJJZCB9ID0gdGhpcy4kc3RhdGU7XG4gICAgICBjb25zdCBuZXdGb250U2l6ZSA9ICtlLnRhcmdldC52YWx1ZTtcbiAgICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZShcbiAgICAgICAgXCJhcmlhLXZhbHVldGV4dFwiLFxuICAgICAgICBgRm9udCBTaXplICR7bmV3Rm9udFNpemV9IFNlbGVjdGVkYFxuICAgICAgKTtcbiAgICAgIC8vIGNvbnN0IGxpdmVNRXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXZlTWVzc2FnZVwiKTtcbiAgICAgIC8vIGlmIChsaXZlTUVzc2FnZSkge1xuICAgICAgLy8gICBsaXZlTUVzc2FnZS50ZXh0Q29udGVudCA9IGBGb250IFNpemUgJHtuZXdGb250U2l6ZX0gU2VsZWN0ZWRgO1xuICAgICAgLy8gfVxuXG4gICAgICBpZiAoZm9udFNpemUgIT09IG5ld0ZvbnRTaXplKSB7XG4gICAgICAgIG9uRm9udFNpemVDaGFuZ2U/LihuZXdGb250U2l6ZSk7XG4gICAgICAgIHNhdmVGb250VG9Mb2NhbFN0b3JhZ2UodXNlcklkLCBuZXdGb250U2l6ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUZvbnRTaXplVG91Y2hTdGFydCA9ICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVGb250U2l6ZVRvdWNoRW5kID0gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiXCI7XG4gICAgfTtcblxuICAgIHRoaXMuaGFuZGxlTGV0dGVyU3BhY2luZ0NoYW5nZSA9IChlKSA9PiB7XG4gICAgICBpZiAoIShlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpKSByZXR1cm47XG4gICAgICBjb25zdCB7IGxldHRlclNwYWNpbmcsIHVzZXJJZCB9ID0gdGhpcy4kc3RhdGU7XG4gICAgICBjb25zdCBuZXdMZXR0ZXJTcGFjaW5nID0gK2UudGFyZ2V0LnZhbHVlO1xuICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKFxuICAgICAgICBcImFyaWEtdmFsdWV0ZXh0XCIsXG4gICAgICAgIGBMZXR0ZXIgU3BhY2UgJHtuZXdMZXR0ZXJTcGFjaW5nfSBTZWxlY3RlZGBcbiAgICAgICk7XG4gICAgICAvLyBjb25zdCBsaXZlTUVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGl2ZU1lc3NhZ2VcIik7XG4gICAgICAvLyBpZiAobGl2ZU1Fc3NhZ2UpIHtcbiAgICAgIC8vICAgbGl2ZU1Fc3NhZ2UudGV4dENvbnRlbnQgPSBgTGV0dGVyIFNwYWNlICR7bmV3TGV0dGVyU3BhY2luZ30gU2VsZWN0ZWRgO1xuICAgICAgLy8gfVxuXG4gICAgICBpZiAobGV0dGVyU3BhY2luZyAhPT0gbmV3TGV0dGVyU3BhY2luZykge1xuICAgICAgICBvbkxldHRlclNwYWNpbmdDaGFuZ2U/LihuZXdMZXR0ZXJTcGFjaW5nKTtcbiAgICAgICAgc2F2ZUxldHRlclNwYWNlVG9Mb2NhbFN0b3JhZ2UodXNlcklkLCBuZXdMZXR0ZXJTcGFjaW5nKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc2V0RXZlbnQoKSB7XG4gICAgaWYgKCF0aGlzLiRub2RlKSByZXR1cm47XG5cbiAgICBjb25zdCByYW5nZUVsZW1lbnQgPSAkKHRoaXMuJG5vZGUpKFwiI2ZvbnQtc2l6ZVwiKTtcbiAgICByYW5nZUVsZW1lbnQ/LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmhhbmRsZUZvbnRTaXplQ2hhbmdlKTtcbiAgICByYW5nZUVsZW1lbnQ/LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuaGFuZGxlRm9udFNpemVUb3VjaFN0YXJ0KTtcbiAgICByYW5nZUVsZW1lbnQ/LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLmhhbmRsZUZvbnRTaXplVG91Y2hFbmQpO1xuXG4gICAgY29uc3QgbGV0dGVyU3BhY2luZ0VsZW1lbnQgPSAkKHRoaXMuJG5vZGUpKFwiI2xldHRlci1zcGFjZVwiKTtcbiAgICBsZXR0ZXJTcGFjaW5nRWxlbWVudD8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiaW5wdXRcIixcbiAgICAgIHRoaXMuaGFuZGxlTGV0dGVyU3BhY2luZ0NoYW5nZVxuICAgICk7XG4gICAgbGV0dGVyU3BhY2luZ0VsZW1lbnQ/LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInRvdWNoc3RhcnRcIixcbiAgICAgIHRoaXMuaGFuZGxlRm9udFNpemVUb3VjaFN0YXJ0XG4gICAgKTtcbiAgICBsZXR0ZXJTcGFjaW5nRWxlbWVudD8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwidG91Y2hlbmRcIixcbiAgICAgIHRoaXMuaGFuZGxlRm9udFNpemVUb3VjaEVuZFxuICAgICk7XG5cbiAgICBjb25zdCB0b2dnbGVCdXR0b24gPSAkKHRoaXMuJG5vZGUpKFwiI3Rvb2wtdG9nZ2xlLWJ1dHRvblwiKTtcbiAgICBjb25zdCB0b29sc0NvbnRhaW5lciA9ICQodGhpcy4kbm9kZSkoXCIudG9vbHMtY29udGFpbmVyXCIpO1xuXG4gICAgdG9nZ2xlQnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxTY3JvbGxBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgIFwiYWRkaXRpb25hbC1zY3JvbGwtYXJlYVwiXG4gICAgICApO1xuXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgaWYgKHRvb2xzQ29udGFpbmVyPy5jbGFzc0xpc3QuY29udGFpbnMoXCJoaWRlXCIpKSB7XG4gICAgICAgIHRvb2xzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuICAgICAgICB0b2dnbGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInJvdGF0ZVwiKTtcbiAgICAgICAgdG9nZ2xlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICBhZGRpdGlvbmFsU2Nyb2xsQXJlYSAmJlxuICAgICAgICAgIChhZGRpdGlvbmFsU2Nyb2xsQXJlYS5zdHlsZS5oZWlnaHQgPSBgJHt0b29sc0NvbnRhaW5lcj8uY2xpZW50SGVpZ2h0fXB4YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b29sc0NvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG4gICAgICAgIHRvZ2dsZUJ1dHRvbj8uY2xhc3NMaXN0LmFkZChcInJvdGF0ZVwiKTtcbiAgICAgICAgdG9nZ2xlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgYWRkaXRpb25hbFNjcm9sbEFyZWEgJiYgKGFkZGl0aW9uYWxTY3JvbGxBcmVhLnN0eWxlLmhlaWdodCA9IFwiMHB4XCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgdGhlbWVTZWxlY3RvciA9ICQodGhpcy4kbm9kZSkoXCIjdGhlbWUtc2VsZWN0b3JcIik7XG4gICAgY29uc3QgdG9vbHMgPSAkKHRoaXMuJG5vZGUpKFwiLnRvb2xzXCIpO1xuICAgIGNvbnN0IHJlYWRpbmdUZXh0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlYWRpbmctdGV4dFwiKTtcblxuICAgIHRoZW1lU2VsZWN0b3I/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICB0aGVtZVNlbGVjdG9yPy5jaGlsZE5vZGVzLmZvckVhY2goKGNvbG9yUGFsbGV0dGVOb2RlKSA9PiB7XG4gICAgICAgIGlmIChjb2xvclBhbGxldHRlTm9kZSBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50KSB7XG4gICAgICAgICAgY29sb3JQYWxsZXR0ZU5vZGUuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkZWZhdWx0XCIpKSB7XG4gICAgICAgIHNldERlZmF1bHRUaGVtZSh0b29scywgcmVhZGluZ1RleHRFbCk7XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIHNhdmVUaGVtZVRvTG9jYWxTdG9yYWdlKHRoaXMuJHN0YXRlLnVzZXJJZCwgXCJkZWZhdWx0XCIpO1xuICAgICAgfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VwaWFcIikpIHtcbiAgICAgICAgc2V0U2VwaWFUaGVtZSh0b29scywgcmVhZGluZ1RleHRFbCk7XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIHNhdmVUaGVtZVRvTG9jYWxTdG9yYWdlKHRoaXMuJHN0YXRlLnVzZXJJZCwgXCJzZXBpYVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRhcmtcIikpIHtcbiAgICAgICAgc2V0RGFya1RoZW1lKHRvb2xzLCByZWFkaW5nVGV4dEVsKTtcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgc2F2ZVRoZW1lVG9Mb2NhbFN0b3JhZ2UodGhpcy4kc3RhdGUudXNlcklkLCBcImRhcmtcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhZnRlclJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuJG5vZGUpIHJldHVybjtcblxuICAgIGNvbnN0IHsgZm9udFNpemUsIG1heExldmVsLCBsZXR0ZXJTcGFjaW5nLCB1c2VySWQgfSA9IHRoaXMuJHN0YXRlO1xuXG4gICAgY29uc3QgZG90Q29udGFpbmVyRWwgPSAkPEhUTUxEaXZFbGVtZW50Pih0aGlzLiRub2RlKShcIi5kb3RDb250YWluZXJcIik7XG4gICAgaWYgKGRvdENvbnRhaW5lckVsKSB7XG4gICAgICBkb3RDb250YWluZXJFbC5pbm5lckhUTUwgPSBjcmVhdGVEb3RzKG1heExldmVsKTtcbiAgICB9XG5cbiAgICAvLyBpbnB1dCBiYWNrZ3JvdW5kIHZhbHVl7JeQIOunnuqyjCBzdHlsZSDrs4Dqsr1cbiAgICBkcmF3SW5wdXQoXCJmb250LXNpemVcIiwgZm9udFNpemUsIG1heExldmVsLCB0aGlzLiRub2RlKTtcbiAgICBkcmF3SW5wdXQoXCJsZXR0ZXItc3BhY2VcIiwgbGV0dGVyU3BhY2luZywgbWF4TGV2ZWwsIHRoaXMuJG5vZGUpO1xuXG4gICAgY29uc3QgY2FuTG9hZExvY2FsU3RvcmFnZSA9IHVzZXJJZCAhPT0gbnVsbCAmJiAhdGhpcy5pc0xvY2FsU3RvcmFnZUxvYWRlZDtcbiAgICBjYW5Mb2FkTG9jYWxTdG9yYWdlICYmIHRoaXMubG9hZExvY2Fsc3RvcmFnZVNldHRpbmdzKHVzZXJJZCk7XG4gIH1cblxuICB0ZW1wbGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNJbml0KSByZXR1cm4gXCJcIjtcbiAgICBjb25zdCB7IGZvbnRTaXplLCBtYXhMZXZlbCwgbGV0dGVyU3BhY2luZyB9ID0gdGhpcy4kc3RhdGU7XG5cbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cInRvb2xzXCI+XG4gICAgICAgICR7Y3JlYXRlVG9nZ2xlQnV0dG9uKCl9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0b29scy1jb250YWluZXJcIj5cbiAgICAgICAgICAke2NyZWF0ZUJhY2tncm91bmRDb2xvclRvb2woKX1cbiAgICAgICAgICAke2NyZWF0ZUZvbnRTaXplVG9vbChmb250U2l6ZSwgbWF4TGV2ZWwpfVxuICAgICAgICAgICR7Y3JlYXRlTGV0dGVyU3BhY2VUb29sKGxldHRlclNwYWNpbmcsIG1heExldmVsKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgY2xlYXJFdmVudCgpIHtcbiAgICBpZiAoIXRoaXMuJG5vZGUpIHJldHVybjtcblxuICAgIGNvbnN0IHJhbmdlRWxlbWVudCA9ICQodGhpcy4kbm9kZSkoXCIjZm9udC1zaXplXCIpO1xuICAgIHJhbmdlRWxlbWVudD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuaGFuZGxlRm9udFNpemVDaGFuZ2UpO1xuICAgIHJhbmdlRWxlbWVudD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwidG91Y2hzdGFydFwiLFxuICAgICAgdGhpcy5oYW5kbGVGb250U2l6ZVRvdWNoU3RhcnRcbiAgICApO1xuICAgIHJhbmdlRWxlbWVudD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuaGFuZGxlRm9udFNpemVUb3VjaEVuZCk7XG5cbiAgICBjb25zdCBsZXR0ZXJTcGFjaW5nRWxlbWVudCA9ICQodGhpcy4kbm9kZSkoXCIjbGV0dGVyLXNwYWNlXCIpO1xuICAgIGxldHRlclNwYWNpbmdFbGVtZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgXCJpbnB1dFwiLFxuICAgICAgdGhpcy5oYW5kbGVMZXR0ZXJTcGFjaW5nQ2hhbmdlXG4gICAgKTtcbiAgICBsZXR0ZXJTcGFjaW5nRWxlbWVudD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwidG91Y2hzdGFydFwiLFxuICAgICAgdGhpcy5oYW5kbGVGb250U2l6ZVRvdWNoU3RhcnRcbiAgICApO1xuICAgIGxldHRlclNwYWNpbmdFbGVtZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgXCJ0b3VjaGVuZFwiLFxuICAgICAgdGhpcy5oYW5kbGVGb250U2l6ZVRvdWNoRW5kXG4gICAgKTtcbiAgfVxuXG4gIGFmdGVyTW91bnQoKSB7XG4gICAgdGhpcy5pc0luaXQgPSBmYWxzZTtcbiAgfVxuXG4gIGxvYWRMb2NhbHN0b3JhZ2VTZXR0aW5ncyh1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHsgZm9udFNpemUsIGxldHRlclNwYWNpbmcsIHRoZW1lIH0gPVxuICAgICAgbG9hZFVzZXJTZXR0aW5nRnJvbUxvY2FsU3RvcmFnZSh1c2VySWQpO1xuICAgIGNvbnN0IHJlYWRpbmdUZXh0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlYWRpbmctdGV4dFwiKTtcblxuICAgIGZvbnRTaXplICYmIHRoaXMub25Gb250U2l6ZUNoYW5nZT8uKGZvbnRTaXplKTtcbiAgICBsZXR0ZXJTcGFjaW5nICYmIHRoaXMub25MZXR0ZXJTcGFjaW5nQ2hhbmdlPy4obGV0dGVyU3BhY2luZyk7XG4gICAgdGhlbWUgJiZcbiAgICAgIHRoaXMuJG5vZGUgJiZcbiAgICAgIHNldFRoZW1lKHRoZW1lLCAkKHRoaXMuJG5vZGUpKFwiLnRvb2xzXCIpLCByZWFkaW5nVGV4dEVsKTtcbiAgICB0aGlzLmlzTG9jYWxTdG9yYWdlTG9hZGVkID0gdHJ1ZTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgVG9vbGJhcjtcblxuZnVuY3Rpb24gY3JlYXRlRG90cyhudW06IG51bWJlcikge1xuICByZXR1cm4gYCR7bmV3IEFycmF5KG51bSkuZmlsbChgPHNwYW4+PC9zcGFuPmApLmpvaW4oXCJcIil9YDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRm9udFNpemVUb29sKGZvbnRTaXplOiBudW1iZXIsIG1heExldmVsOiBudW1iZXIpIHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGNsYXNzPVwidG9vbC1jb250YWluZXJcIiBhcmlhLWxhYmVsPVwiRm9udCBTaXplIENvbnRyb2xsZXJcIiB0aXRsZT1cIkZvbnQgU2l6ZSBDb250cm9sbGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidG9vbC1sYWJlbFwiPkZvbnQgU2l6ZTwvZGl2PlxuICAgICAgPGRpdiBpZD1cImZvbnQtY29udHJvbGxlclwiIGNsYXNzPVwiZm9udC1zaXplXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtc2l6ZS1jb250YWluZXIgc2xpZGVjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRvdENvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICR7Y3JlYXRlRG90cyhtYXhMZXZlbCl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8aW5wdXQgcm9sZT1cInNsaWRlclwiIHRhYmluZGV4PVwiMFwiIGFyaWEtdmFsdWV0ZXh0PVwiRm9udCBTaXplICR7Zm9udFNpemV9IFNlbGVjdGVkXCIgYXJpYS1sYWJlbGxlZGJ5PVwiZm9udC1zaXplLWxhYmVsXCIgdHlwZT1cInJhbmdlXCIgbWluPVwiMVwiIG1heD1cIiR7bWF4TGV2ZWx9XCIgaWQ9XCJmb250LXNpemVcIiBzdGVwPVwiMVwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxldHRlclNwYWNlVG9vbChsZXR0ZXJTcGFjZTogbnVtYmVyLCBtYXhMZXZlbDogbnVtYmVyKSB7XG4gIHJldHVybiBgXG4gICAgPGRpdiBjbGFzcz1cInRvb2wtY29udGFpbmVyXCIgYXJpYS1sYWJlbD1cIkxldHRlciBTcGFjZSBDb250cm9sbGVyXCIgdGl0bGU9XCJMZXR0ZXIgU3BhY2UgQ29udHJvbGxlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRvb2wtbGFiZWxcIj5MZXR0ZXIgU3BhY2luZzwvZGl2PlxuICAgICAgPGRpdiBpZD1cImZvbnQtY29udHJvbGxlclwiIGNsYXNzPVwibGV0dGVyLXNwYWNlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImxldHRlci1zcGFjZS1jb250YWluZXIgc2xpZGVjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRvdENvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICR7Y3JlYXRlRG90cyhtYXhMZXZlbCl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8aW5wdXQgcm9sZT1cInNsaWRlclwiIHRhYmluZGV4PVwiMFwiIGFyaWEtdmFsdWV0ZXh0PVwiTGV0dGVyIFNwYWNlICR7bGV0dGVyU3BhY2V9IFNlbGVjdGVkXCIgYXJpYS1sYWJlbGxlZGJ5PVwibGV0dGVyLXNwYWNlLWxhYmVsXCIgdHlwZT1cInJhbmdlXCIgbWluPVwiMVwiIG1heD1cIiR7bWF4TGV2ZWx9XCIgaWQ9XCJsZXR0ZXItc3BhY2VcIiBzdGVwPVwiMVwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhY2tncm91bmRDb2xvclRvb2woKSB7XG4gIHJldHVybiBgXG4gICAgPGRpdiBjbGFzcz1cInRvb2wtY29udGFpbmVyXCI+XG4gICAgICA8bGFiZWwgY2xhc3M9XCJ0b29sLWxhYmVsXCIgZm9yPVwidGhlbWUtc2VsZWN0b3JcIj5CYWNrZ3JvdW5kIENvbG9yPC9sYWJlbD5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2xvci1wYWxldHRlLWNvbnRhaW5lclwiIGlkPVwidGhlbWUtc2VsZWN0b3JcIj5cbiAgICAgICAgPGJ1dHRvbiByb2xlPVwicmFkaW9cIiBpZD1cImNvbG9yLXBhbGV0dGUgZGVmYXVsdFwiIGFyaWEtY2hlY2tlZD1cImZhbHNlXCIgY2xhc3M9XCJjb2xvci1wYWxldHRlIGRlZmF1bHRcIiBhcmlhLWxhYmVsPVwiRGVmYXVsdCBUaGVtZVwiIHRpdGxlPVwiRGVmYXVsdCBUaGVtZVwiPkFhPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gcm9sZT1cInJhZGlvXCIgaWQ9XCJjb2xvci1wYWxldHRlIHNlcGlhXCIgYXJpYS1jaGVja2VkPVwiZmFsc2VcIiBjbGFzcz1cImNvbG9yLXBhbGV0dGUgc2VwaWFcIiBhcmlhLWxhYmVsPVwiU2VwaWEgVGhlbWVcIiB0aXRsZT1cIlNlcGlhIFRoZW1lXCI+QWE8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiByb2xlPVwicmFkaW9cIiBpZD1cImNvbG9yLXBhbGV0dGUgZGFya1wiIGFyaWEtY2hlY2tlZD1cImZhbHNlXCIgY2xhc3M9XCJjb2xvci1wYWxldHRlIGRhcmtcIiBhcmlhLWxhYmVsPVwiRGFyayBUaGVtZVwiIHRpdGxlPVwiRGFyayBUaGVtZVwiPkFhPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVG9nZ2xlQnV0dG9uKCkge1xuICByZXR1cm4gYFxuICAgIDxidXR0b24gaWQ9XCJ0b29sLXRvZ2dsZS1idXR0b25cIiBhcmlhLWV4cGFuZGVkPXRydWUgY2xhc3M9XCJ0b29sLXRvZ2dsZS1idXR0b25cIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIEJ1dHRvbiBmb3IgVG9vbGJhclwiIHRpdGxlPVwiVG9nZ2xlIEJ1dHRvbiBmb3IgVG9vbGJhclwiPlxuICAgICAgPHN2ZyB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjVcIiB2aWV3Qm94PVwiMCAwIDI0IDI1XCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk02LjYwMTU2IDEwLjMzNTZDNi42MDE1NiAxMC41NzU2IDYuNjYxNTYgMTAuODE1NiA2Ljg0MTU2IDEwLjk5NTZMMTEuNTgxNiAxNS43MzU2QzExLjc2MTYgMTUuODU1NiAxMS45NDE2IDE1Ljk3NTYgMTIuMTgxNiAxNS45NzU2QzEyLjQyMTYgMTUuOTc1NiAxMi42NjE2IDE1Ljg1NTYgMTIuODQxNiAxNS43MzU2TDE3LjU4MTYgMTAuOTk1NkMxNy45NDE2IDEwLjYzNTYgMTcuOTQxNiAxMC4wOTU2IDE3LjU4MTYgOS43MzU1OUMxNy4yMjE2IDkuMzc1NTkgMTYuNjgxNiA5LjM3NTU5IDE2LjMyMTYgOS43MzU1OUwxMi4xODE2IDEzLjgxNTZMOC4xMDE1NiA5LjczNTU5QzcuNzQxNTYgOS4zNzU1OSA3LjIwMTU2IDkuMzc1NTkgNi44NDE1NiA5LjczNTU5QzYuNjYxNTYgOS45MTU1OSA2LjYwMTU2IDEwLjE1NTYgNi42MDE1NiAxMC4zMzU2WlwiIGZpbGw9XCJ3aGl0ZVwiLz48L3N2Zz5cbiAgICA8L2J1dHRvbj5cbiAgYDtcbn1cbiIsImltcG9ydCBDb250ZW50TG9hZEhlbHBlck9GRkxJTkUgZnJvbSBcIi4vQ29udGVudExvYWRlck9GRkxJTkVcIjtcbmltcG9ydCBDb250ZW50TG9hZEhlbHBlcldFQiBmcm9tIFwiLi9Db250ZW50TG9hZGVyV0VCXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHByb2Nlc3MuZW52LkNMSUVOVCA9PT0gXCJXRUJcIlxuICA/IChyZXF1aXJlKFwiLi9Db250ZW50TG9hZGVyV0VCXCIpLmRlZmF1bHQgYXMgdHlwZW9mIENvbnRlbnRMb2FkSGVscGVyV0VCKVxuICA6IChyZXF1aXJlKFwiLi9Db250ZW50TG9hZGVyT0ZGTElORVwiKVxuICAgICAgLmRlZmF1bHQgYXMgdHlwZW9mIENvbnRlbnRMb2FkSGVscGVyT0ZGTElORSk7XG4iLCJpbXBvcnQgQXBwIGZyb20gXCIuL2FwcFwiO1xuaW1wb3J0IFwiLi9jc3MvbGl2ZXRleHQuY3NzXCI7XG5cbi8vIGFwaSBtb2NraW5nXG5pZiAocHJvY2Vzcy5lbnYuREVWX01PREUpIHtcbiAgY29uc3QgeyBzdGFydERldk1vZGUgfSA9IHJlcXVpcmUoXCIuL29ubHlGb3JEZXZcIikuZGVmYXVsdDtcbiAgc3RhcnREZXZNb2RlKCk7XG59XG5cbmNvbnN0ICRhcHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FwcFwiKTtcblxuJGFwcCAmJiBuZXcgQXBwKHsgJHRhcmdldDogJGFwcCB9KS5tb3VudCgpO1xuIiwiaW1wb3J0IENsb3NlQnV0dG9uIGZyb20gXCIuL2NvbXBvbmVudHMvQ2xvc2VCdXR0b25cIjtcbmltcG9ydCBSZWFkaW5nVGV4dCBmcm9tIFwiLi9jb21wb25lbnRzL1JlYWRpbmdUZXh0XCI7XG5pbXBvcnQgVG9vbGJhciBmcm9tIFwiLi9jb21wb25lbnRzL1Rvb2xiYXJcIjtcbmltcG9ydCB7XG4gIENPTlRFTlRfUVVFUllfUEFSQU1FVEVSX0tFWVMsXG4gIEVSUk9SX01FU1NBR0VTLFxuICBVU0VSX0lEX1FVRVJZX1BBUkFNRVRFUl9LRVksXG59IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IENvbnRlbnRMb2FkZXIgZnJvbSBcIi4vaGVscGVyL0NvbnRlbnRMb2FkZXJcIjtcbmltcG9ydCBDb21wb25lbnQgZnJvbSBcIi4vbGliL2NvcmUvQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBDb21wb25lbnRDb25zdHJ1Y3RvciB9IGZyb20gXCIuL2xpYi90eXBlcy9Db21wb25lbnRDb25zdHJ1Y3Rvci50eXBlXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSwgaXNOYXJyb3cgfSBmcm9tIFwiLi9saWIvdXRpbHNcIjtcblxudHlwZSBTdGF0ZSA9IHtcbiAgdGV4dDogc3RyaW5nO1xuICBmb250U2l6ZTogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nIHwgbnVsbDtcbiAgaXNNb2JpbGU/OiBib29sZWFuO1xuICBsZXR0ZXJTcGFjaW5nOiBudW1iZXI7XG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmNvbnN0IFdJREVfRk9OVF9TSVpFX01BWCA9IDc7XG5jb25zdCBOQVJST1dfRk9OVF9TSVpFX01BWCA9IDU7XG5cbmNsYXNzIEFwcCBleHRlbmRzIENvbXBvbmVudDxTdGF0ZT4ge1xuICBoYW5kbGVSZXNpemVEZWJvdW5jZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3Rvcih7ICR0YXJnZXQgfTogQ29tcG9uZW50Q29uc3RydWN0b3I8U3RhdGU+KSB7XG4gICAgc3VwZXIoe1xuICAgICAgJHRhcmdldCxcbiAgICAgIGluaXRpYWxTdGF0ZToge1xuICAgICAgICB0ZXh0OiBcIkxvYWRpbmcuLi5cIixcbiAgICAgICAgZm9udFNpemU6IDQsXG4gICAgICAgIHRpdGxlOiBcIlJUQSBWaWV3ZXJcIixcbiAgICAgICAgaXNNb2JpbGU6IGlzTmFycm93KCksXG4gICAgICAgIGxldHRlclNwYWNpbmc6IDIsXG4gICAgICAgIHVzZXJJZDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCB7IHRleHQsIGZvbnRTaXplLCBpc01vYmlsZSwgbGV0dGVyU3BhY2luZywgdXNlcklkIH0gPSB0aGlzLiRzdGF0ZTtcblxuICAgIHRoaXMuJGNoaWxkcmVuLnNldChcbiAgICAgIFwicmVhZGluZ1RleHRcIixcbiAgICAgIG5ldyBSZWFkaW5nVGV4dCh7XG4gICAgICAgICR0YXJnZXQ6IHRoaXMuJHRhcmdldCxcbiAgICAgICAgaW5pdGlhbFN0YXRlOiB7IHRleHQsIGZvbnRTaXplLCBsZXR0ZXJTcGFjaW5nIH0sXG4gICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLiRjaGlsZHJlbi5zZXQoXG4gICAgICBcImNsb3NlQnV0dG9uXCIsXG4gICAgICBuZXcgQ2xvc2VCdXR0b24oeyAkdGFyZ2V0OiB0aGlzLiR0YXJnZXQgfSlcbiAgICApO1xuXG4gICAgdGhpcy4kY2hpbGRyZW4uc2V0KFxuICAgICAgXCJ0b29sYmFyXCIsXG4gICAgICBuZXcgVG9vbGJhcih7XG4gICAgICAgICR0YXJnZXQ6IHRoaXMuJHRhcmdldCxcbiAgICAgICAgaW5pdGlhbFN0YXRlOiB7XG4gICAgICAgICAgZm9udFNpemUsXG4gICAgICAgICAgbGV0dGVyU3BhY2luZyxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgbWF4TGV2ZWw6IGlzTW9iaWxlID8gTkFSUk9XX0ZPTlRfU0laRV9NQVggOiBXSURFX0ZPTlRfU0laRV9NQVgsXG4gICAgICAgIH0sXG4gICAgICAgIG9uRm9udFNpemVDaGFuZ2U6ICh2YWx1ZSkgPT4gdGhpcy5zZXRTdGF0ZSh7IGZvbnRTaXplOiB2YWx1ZSB9KSxcbiAgICAgICAgb25MZXR0ZXJTcGFjaW5nQ2hhbmdlOiAodmFsdWUpID0+XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGxldHRlclNwYWNpbmc6IHZhbHVlIH0pLFxuICAgICAgfSlcbiAgICApO1xuXG4gICAgdGhpcy5zdWJzY3JpYmVTdGF0ZSh7XG4gICAgICB0YXJnZXRTdGF0ZTogXCJmb250U2l6ZVwiLFxuICAgICAgc3Vic2NyaWJlcjogXCJyZWFkaW5nVGV4dFwiLFxuICAgICAgc3Vic2NyaWJlclN0YXRlS2V5OiBcImZvbnRTaXplXCIsXG4gICAgfSk7XG4gICAgdGhpcy5zdWJzY3JpYmVTdGF0ZSh7XG4gICAgICB0YXJnZXRTdGF0ZTogXCJsZXR0ZXJTcGFjaW5nXCIsXG4gICAgICBzdWJzY3JpYmVyOiBcInJlYWRpbmdUZXh0XCIsXG4gICAgICBzdWJzY3JpYmVyU3RhdGVLZXk6IFwibGV0dGVyU3BhY2luZ1wiLFxuICAgIH0pO1xuICAgIHRoaXMuc3Vic2NyaWJlU3RhdGUoe1xuICAgICAgdGFyZ2V0U3RhdGU6IFwidGV4dFwiLFxuICAgICAgc3Vic2NyaWJlcjogXCJyZWFkaW5nVGV4dFwiLFxuICAgICAgc3Vic2NyaWJlclN0YXRlS2V5OiBcInRleHRcIixcbiAgICB9KTtcbiAgICB0aGlzLnN1YnNjcmliZVN0YXRlKHtcbiAgICAgIHRhcmdldFN0YXRlOiBcImlzTW9iaWxlXCIsXG4gICAgICBzdWJzY3JpYmVyOiBcInJlYWRpbmdUZXh0XCIsXG4gICAgICBzdWJzY3JpYmVyU3RhdGVLZXk6IFwiaXNNb2JpbGVcIixcbiAgICB9KTtcbiAgICB0aGlzLnN1YnNjcmliZVN0YXRlKHtcbiAgICAgIHRhcmdldFN0YXRlOiBcImZvbnRTaXplXCIsXG4gICAgICBzdWJzY3JpYmVyOiBcInRvb2xiYXJcIixcbiAgICAgIHN1YnNjcmliZXJTdGF0ZUtleTogXCJmb250U2l6ZVwiLFxuICAgIH0pO1xuICAgIHRoaXMuc3Vic2NyaWJlU3RhdGUoe1xuICAgICAgdGFyZ2V0U3RhdGU6IFwibGV0dGVyU3BhY2luZ1wiLFxuICAgICAgc3Vic2NyaWJlcjogXCJ0b29sYmFyXCIsXG4gICAgICBzdWJzY3JpYmVyU3RhdGVLZXk6IFwibGV0dGVyU3BhY2luZ1wiLFxuICAgIH0pO1xuICAgIHRoaXMuc3Vic2NyaWJlU3RhdGUoe1xuICAgICAgdGFyZ2V0U3RhdGU6IFwidXNlcklkXCIsXG4gICAgICBzdWJzY3JpYmVyOiBcInRvb2xiYXJcIixcbiAgICAgIHN1YnNjcmliZXJTdGF0ZUtleTogXCJ1c2VySWRcIixcbiAgICB9KTtcbiAgICB0aGlzLnN1YnNjcmliZVN0YXRlKHtcbiAgICAgIHRhcmdldFN0YXRlOiBcImlzTW9iaWxlXCIsXG4gICAgICBzdWJzY3JpYmVyOiBcInRvb2xiYXJcIixcbiAgICAgIHN1YnNjcmliZXJTdGF0ZUtleTogXCJtYXhMZXZlbFwiLFxuICAgICAgY29tcHV0ZTogKGlzTW9iaWxlU3RhdGUpID0+XG4gICAgICAgIGlzTW9iaWxlU3RhdGUgPyBOQVJST1dfRk9OVF9TSVpFX01BWCA6IFdJREVfRk9OVF9TSVpFX01BWCxcbiAgICB9KTtcblxuICAgIHRoaXMuaGFuZGxlUmVzaXplRGVib3VuY2UgPSBkZWJvdW5jZSgoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNNb2JpbGU6IGlzTmFycm93KCksXG4gICAgICAgIGZvbnRTaXplOiBpc05hcnJvdygpXG4gICAgICAgICAgPyBNYXRoLm1pbih0aGlzLiRzdGF0ZS5mb250U2l6ZSwgTkFSUk9XX0ZPTlRfU0laRV9NQVgpXG4gICAgICAgICAgOiB0aGlzLiRzdGF0ZS5mb250U2l6ZSxcbiAgICAgIH0pO1xuICAgIH0sIDIwKTtcbiAgfVxuXG4gIGFmdGVyUmVuZGVyKCkge1xuICAgIGNvbnN0IHsgdGl0bGUgfSA9IHRoaXMuJHN0YXRlO1xuICAgIGlmICh0aXRsZSAmJiBkb2N1bWVudC50aXRsZSAhPT0gdGl0bGUpIHtcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7XG4gICAgfVxuICB9XG5cbiAgYWZ0ZXJNb3VudCgpIHtcbiAgICBjb25zdCBmZXRjaENvbnRlbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeVBhcmFtZXRlciA9XG4gICAgICAgIHByb2Nlc3MuZW52LkNMSUVOVCA9PT0gXCJXRUJcIlxuICAgICAgICAgID8gQ09OVEVOVF9RVUVSWV9QQVJBTUVURVJfS0VZUy5XRUJcbiAgICAgICAgICA6IENPTlRFTlRfUVVFUllfUEFSQU1FVEVSX0tFWVMuT0ZGTElORTtcbiAgICAgIGNvbnN0IGVuY29kZWRQYXJhbWV0ZXIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLmdldChcbiAgICAgICAgcXVlcnlQYXJhbWV0ZXJcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHBhcmFtZXRlclZhbHVlID0gZW5jb2RlZFBhcmFtZXRlclxuICAgICAgICA/IGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkUGFyYW1ldGVyKVxuICAgICAgICA6IGVuY29kZWRQYXJhbWV0ZXI7XG5cbiAgICAgIGlmIChwYXJhbWV0ZXJWYWx1ZSkge1xuICAgICAgICBjb25zdCB7IHRpdGxlLCBjb250ZW50IH0gPSBhd2FpdCBDb250ZW50TG9hZGVyLmdldENvbnRlbnQoXG4gICAgICAgICAgcGFyYW1ldGVyVmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRpdGxlID09PSBFUlJPUl9NRVNTQUdFUy5GRVRDSF9USVRMRSB8fFxuICAgICAgICAgIGNvbnRlbnQgPT09IEVSUk9SX01FU1NBR0VTLkZFVENIX0NPTlRFTlRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3Qgbm90RW5jb2RlZFBhcmFtZXRlciA9IGdldFF1ZXJ5UGFyYW1ldGVyVmFsdWUocXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgIGNvbnN0IHsgdGl0bGU6IGV4VGl0bGUsIGNvbnRlbnQ6IGV4Q29udGVudCB9ID1cbiAgICAgICAgICAgIGF3YWl0IENvbnRlbnRMb2FkZXIuZ2V0Q29udGVudChub3RFbmNvZGVkUGFyYW1ldGVyIHx8IFwiXCIpO1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0aXRsZTogZXhUaXRsZSwgdGV4dDogZXhDb250ZW50IH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0aXRsZSwgdGV4dDogY29udGVudCB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0ZXh0OiBFUlJPUl9NRVNTQUdFUy5GRVRDSF9DT05URU5UIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCB1c2VySWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLmdldChcbiAgICAgIFVTRVJfSURfUVVFUllfUEFSQU1FVEVSX0tFWVxuICAgICk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgdXNlcklkOiB1c2VySWQgfHwgbnVsbCB9KTtcblxuICAgIGZldGNoQ29udGVudCgpO1xuICB9XG5cbiAgc2V0RXZlbnQoKTogdm9pZCB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5oYW5kbGVSZXNpemVEZWJvdW5jZSk7XG4gIH1cblxuICBjbGVhckV2ZW50KCk6IHZvaWQge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuaGFuZGxlUmVzaXplRGVib3VuY2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1ldGVyVmFsdWUocXVlcnlQYXJhbWV0ZXI6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYCg/OlxcXFw/JHtxdWVyeVBhcmFtZXRlcn09KSguKylgLCBcImdcIik7XG4gIGNvbnN0IHJlZ2V4TWF0Y2hBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcbiAgICAubWF0Y2gocmVnZXgpXG4gICAgPy5tYXAoKGUpID0+IGUucmVwbGFjZShgPyR7cXVlcnlQYXJhbWV0ZXJ9PWAsIFwiXCIpKTtcbiAgcmV0dXJuIHJlZ2V4TWF0Y2hBcnJheSAmJiByZWdleE1hdGNoQXJyYXkubGVuZ3RoID8gcmVnZXhNYXRjaEFycmF5WzBdIDogXCJcIjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwO1xuIl0sIm5hbWVzIjpbIkVSUk9SX01FU1NBR0VTIiwiRkVUQ0hfQ09OVEVOVCIsIkZFVENIX1RJVExFIiwiQ09OVEVOVF9RVUVSWV9QQVJBTUVURVJfS0VZUyIsIldFQiIsIk9GRkxJTkUiLCJVU0VSX0lEX1FVRVJZX1BBUkFNRVRFUl9LRVkiLCJwYXJzZUNvbnRlbnQiLCJ4bWxEYXRhIiwicGFyc2VkRE9NIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwidGl0bGUiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjb250ZW50IiwiaW5uZXJIVE1MIiwiZ2V0Q29udGVudCIsImZpbGVOYW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ3aW5kb3ciLCJydGFDb250ZW50UHJvdmlkZXIiLCJFcnJvciIsImZldGNoQ29udGVudCIsInRoZW4iLCJjYXRjaCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzaGFsbG93RXF1YWwiLCJvYmpBIiwib2JqQiIsImNvbXBhcmUiLCJjb21wYXJlQ29udGV4dCIsInJldCIsImlzIiwia2V5c0EiLCJrZXlzIiwia2V5c0IiLCJsZW5ndGgiLCJiSGFzT3duUHJvcGVydHkiLCJiaW5kIiwiaWR4IiwidmFsdWVBIiwidmFsdWVCIiwiY29uc3RydWN0b3IiLCIkdGFyZ2V0IiwiaW5pdGlhbFN0YXRlIiwiY2xhc3NOYW1lIiwiaWQiLCJkaXNwbGF5IiwidGhpcyIsIiRjaGlsZHJlbiIsIk1hcCIsIiRzdGF0ZSIsIiRzdGF0ZVN1YnNjcmliZXJzIiwiJHByb3BzIiwiUHJveHkiLCJzZXQiLCJwcm9wcyIsInZhbHVlIiwicHJldlByb3BzIiwicmVuZGVyIiwidGVtcGxhdGUiLCJiZWZvcmVSZW5kZXIiLCJhZnRlclJlbmRlciIsIiRub2RlIiwic2V0QXR0cmlidXRlIiwiZm9yRWFjaCIsIkNoaWxkQ29tcG9uZW50IiwidW5Nb3VudCIsImNsZWFyRXZlbnQiLCJzZXRFdmVudCIsIm1vdW50Iiwic2V0U3RhdGUiLCJuZXdTdGF0ZSIsInByZXZTdGF0ZSIsInNldFN1YnNjcmliZXJzU3RhdGUiLCJzdWJzY3JpYmVTdGF0ZSIsInRhcmdldFN0YXRlIiwic3Vic2NyaWJlciIsInN1YnNjcmliZXJTdGF0ZUtleSIsImNvbXB1dGUiLCJzdWJzY3JpYmVyTmFtZSIsInN1YnNjcmliZWRTdGF0ZSIsImVudHJpZXMiLCJuZXdDaGlsZFN0YXRlIiwicmVkdWNlIiwic3RhdGUiLCJiZWZvcmVNb3VudCIsImFwcGVuZENoaWxkIiwiYWZ0ZXJNb3VudCIsImJlZm9yZVVuTW91bnQiLCJyZW1vdmVDaGlsZCIsIkNvbXBvbmVudCIsInN1cGVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaGFuZGxlQ2xvc2UiLCJ0YXJnZXQiLCJOb2RlIiwicHJldmVudERlZmF1bHQiLCJjbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVLZXlEb3duIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInN0b3BQcm9wYWdhdGlvbiIsImxvZyIsImN1cnJlbnRUYXJnZXQiLCJjbGljayIsImRlZmF1bHRTdGF0ZSIsInRleHQiLCJmb250U2l6ZSIsImlzTW9iaWxlIiwibGV0dGVyU3BhY2luZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsIiQiLCJlbGVtZW50IiwicXVlcnkiLCJpc05hcnJvdyIsImlubmVyV2lkdGgiLCJkcmF3SW5wdXQiLCJ0eXBlIiwic3R5bGVEZWdyZWUiLCJtYXhMZXZlbCIsIm5vZGUiLCJpbnB1dEVsIiwiSFRNTElucHV0RWxlbWVudCIsInBvc2l0aW9uIiwibWF4IiwidG9TdHJpbmciLCJzdHlsZSIsImJhY2tncm91bmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3BhbkVsIiwiaW5kZXgiLCJzdGVwTnVtIiwic2V0RGVmYXVsdFRoZW1lIiwidG9vbHMiLCJyZWFkaW5nVGV4dEVsIiwiYm9keSIsImJhY2tncm91bmRDb2xvciIsImNvbG9yIiwic2V0QXJpYUNoZWNrZWQiLCJzZXRTZXBpYVRoZW1lIiwic2V0RGFya1RoZW1lIiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWx0ZXIiLCJpIiwic2F2ZVRoZW1lVG9Mb2NhbFN0b3JhZ2UiLCJ1c2VySWQiLCJuZXdUaGVtZSIsInNldHRpbmdzS2V5IiwidXBkYXRlZFNldHRpbmdzIiwibG9hZFVzZXJTZXR0aW5nRnJvbUxvY2FsU3RvcmFnZSIsInRoZW1lIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXR0aW5ncyIsImdldEl0ZW0iLCJwYXJzZSIsImlzSW5pdCIsImlzTG9jYWxTdG9yYWdlTG9hZGVkIiwib25Gb250U2l6ZUNoYW5nZSIsIm9uTGV0dGVyU3BhY2luZ0NoYW5nZSIsImhhbmRsZUZvbnRTaXplQ2hhbmdlIiwibmV3Rm9udFNpemUiLCJzYXZlRm9udFRvTG9jYWxTdG9yYWdlIiwiaGFuZGxlRm9udFNpemVUb3VjaFN0YXJ0Iiwib3ZlcmZsb3ciLCJoYW5kbGVGb250U2l6ZVRvdWNoRW5kIiwiaGFuZGxlTGV0dGVyU3BhY2luZ0NoYW5nZSIsIm5ld0xldHRlclNwYWNpbmciLCJzYXZlTGV0dGVyU3BhY2VUb0xvY2FsU3RvcmFnZSIsInJhbmdlRWxlbWVudCIsImxldHRlclNwYWNpbmdFbGVtZW50IiwidG9nZ2xlQnV0dG9uIiwidG9vbHNDb250YWluZXIiLCJhZGRpdGlvbmFsU2Nyb2xsQXJlYSIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImNvbnRhaW5zIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwidGhlbWVTZWxlY3RvciIsImNoaWxkTm9kZXMiLCJjb2xvclBhbGxldHRlTm9kZSIsIkhUTUxCdXR0b25FbGVtZW50IiwiZG90Q29udGFpbmVyRWwiLCJjcmVhdGVEb3RzIiwibG9hZExvY2Fsc3RvcmFnZVNldHRpbmdzIiwiY3JlYXRlRm9udFNpemVUb29sIiwibGV0dGVyU3BhY2UiLCJjcmVhdGVMZXR0ZXJTcGFjZVRvb2wiLCJzZXRUaGVtZSIsIm51bSIsIkFycmF5IiwiZmlsbCIsImpvaW4iLCJyZXF1aXJlIiwiJGFwcCIsIlJlYWRpbmdUZXh0IiwiQ2xvc2VCdXR0b24iLCJUb29sYmFyIiwiaXNNb2JpbGVTdGF0ZSIsImhhbmRsZVJlc2l6ZURlYm91bmNlIiwiZm4iLCJkZWxheSIsInRpbWVJZCIsImFyZ3MiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZGVib3VuY2UiLCJNYXRoIiwibWluIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJhc3luYyIsInF1ZXJ5UGFyYW1ldGVyIiwiZW5jb2RlZFBhcmFtZXRlciIsInBhcmFtZXRlclZhbHVlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiQ29udGVudExvYWRlciIsIm5vdEVuY29kZWRQYXJhbWV0ZXIiLCJyZWdleCIsIlJlZ0V4cCIsInJlZ2V4TWF0Y2hBcnJheSIsIm1hdGNoIiwibWFwIiwicmVwbGFjZSIsImdldFF1ZXJ5UGFyYW1ldGVyVmFsdWUiLCJleFRpdGxlIiwiZXhDb250ZW50Il0sInNvdXJjZVJvb3QiOiIifQ==